<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤šæ¬¡å…ƒç‰¹å¾´é‡åˆ†æãƒ»è‡ªå‹•ç™ºè¦‹ã‚·ã‚¹ãƒ†ãƒ ãƒ†ã‚¹ãƒˆ</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .container { max-width: 1400px; margin: 0 auto; background: white; padding: 20px; border-radius: 10px; }
        .test-section { background: #fff; border: 1px solid #ddd; border-radius: 8px; padding: 15px; margin: 15px 0; }
        .btn { background: linear-gradient(45deg, #667eea, #764ba2); color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin: 5px; }
        .btn:hover { transform: translateY(-1px); }
        .btn-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; margin: 15px 0; }
        .result-card { background: #f8f9fa; border-left: 4px solid #28a745; padding: 15px; margin: 10px 0; border-radius: 5px; }
        .error-card { background: #f8f9fa; border-left: 4px solid #dc3545; padding: 15px; margin: 10px 0; border-radius: 5px; }
        .warning-card { background: #fff3cd; border-left: 4px solid #ffc107; padding: 15px; margin: 10px 0; border-radius: 5px; }
        .info-card { background: #e3f2fd; border-left: 4px solid #2196f3; padding: 15px; margin: 10px 0; border-radius: 5px; }
        .metrics-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin: 15px 0; }
        .metric-card { background: #e3f2fd; padding: 15px; border-radius: 8px; text-align: center; }
        .progress-bar { width: 100%; height: 20px; background: #e0e0e0; border-radius: 10px; overflow: hidden; margin: 10px 0; }
        .progress-fill { height: 100%; background: linear-gradient(45deg, #28a745, #20c997); transition: width 0.3s; }
        .feature-list { background: #f1f8e9; border: 1px solid #4caf50; border-radius: 5px; padding: 10px; margin: 5px 0; max-height: 300px; overflow-y: auto; }
        .feature-item { padding: 5px; border-bottom: 1px solid #ddd; }
        .feature-importance { display: inline-block; width: 50px; height: 10px; background: #e0e0e0; border-radius: 5px; margin-left: 10px; }
        .feature-importance-fill { height: 100%; background: linear-gradient(45deg, #ff9800, #f57c00); border-radius: 5px; }
        .analysis-chart { background: #fafafa; border: 1px solid #ddd; border-radius: 5px; padding: 15px; margin: 10px 0; text-align: center; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” å¤šæ¬¡å…ƒç‰¹å¾´é‡åˆ†æãƒ»è‡ªå‹•ç™ºè¦‹ã‚·ã‚¹ãƒ†ãƒ ãƒ†ã‚¹ãƒˆ</h1>
        
        <div class="test-section">
            <h2>ğŸš€ å¤šæ¬¡å…ƒç‰¹å¾´é‡åˆ†æã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦</h2>
            <p>æ©Ÿæ¢°å­¦ç¿’ã®äºˆæ¸¬ç²¾åº¦å‘ä¸Šã®ãŸã‚ã«ã€å¤šæ¬¡å…ƒç‰¹å¾´é‡åˆ†æãƒ»è‡ªå‹•ç™ºè¦‹ã‚·ã‚¹ãƒ†ãƒ ã‚’ãƒ†ã‚¹ãƒˆã—ã¾ã™</p>
            
            <div class="btn-grid">
                <button class="btn" onclick="testFullAnalysis()">ğŸ”„ å®Œå…¨åˆ†æå®Ÿè¡Œ</button>
                <button class="btn" onclick="testBaseFeatureExtraction()">ğŸ“Š åŸºæœ¬ç‰¹å¾´é‡æŠ½å‡º</button>
                <button class="btn" onclick="testFeatureEngineering()">ğŸ”§ ç‰¹å¾´é‡å·¥å­¦</button>
                <button class="btn" onclick="testDimensionReduction()">ğŸ“‰ æ¬¡å…ƒå‰Šæ¸›</button>
            </div>
            
            <div id="analysisResults"></div>
        </div>
        
        <div class="test-section">
            <h2>ğŸ” ç‰¹å¾´é‡è‡ªå‹•ç™ºè¦‹ã‚·ã‚¹ãƒ†ãƒ </h2>
            <p>æ–°ã—ã„ç‰¹å¾´é‡ã®è‡ªå‹•ç™ºè¦‹ã¨é‡è¦åº¦è©•ä¾¡æ©Ÿèƒ½ã‚’ãƒ†ã‚¹ãƒˆã—ã¾ã™</p>
            
            <div class="btn-grid">
                <button class="btn" onclick="testFeatureDiscovery()">ğŸ” ç‰¹å¾´é‡ç™ºè¦‹</button>
                <button class="btn" onclick="testFeatureSelection()">ğŸ¯ ç‰¹å¾´é‡é¸æŠ</button>
                <button class="btn" onclick="testFeatureImportance()">ğŸ“Š é‡è¦åº¦è©•ä¾¡</button>
                <button class="btn" onclick="testPerformanceEvaluation()">ğŸ“ˆ æ€§èƒ½è©•ä¾¡</button>
            </div>
            
            <div id="discoveryResults"></div>
        </div>
        
        <div class="test-section">
            <h2>ğŸ“Š åˆ†æçµæœãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</h2>
            <div class="metrics-grid">
                <div class="metric-card">
                    <h3>åŸºæœ¬ç‰¹å¾´é‡</h3>
                    <div class="progress-bar">
                        <div class="progress-fill" id="baseFeatureProgress" style="width: 0%"></div>
                    </div>
                    <span id="baseFeatureValue">æ¸¬å®šä¸­...</span>
                </div>
                <div class="metric-card">
                    <h3>å·¥å­¦ç‰¹å¾´é‡</h3>
                    <div class="progress-bar">
                        <div class="progress-fill" id="engineeredFeatureProgress" style="width: 0%"></div>
                    </div>
                    <span id="engineeredFeatureValue">æ¸¬å®šä¸­...</span>
                </div>
                <div class="metric-card">
                    <h3>ç™ºè¦‹ç‰¹å¾´é‡</h3>
                    <div class="progress-bar">
                        <div class="progress-fill" id="discoveredFeatureProgress" style="width: 0%"></div>
                    </div>
                    <span id="discoveredFeatureValue">æ¸¬å®šä¸­...</span>
                </div>
                <div class="metric-card">
                    <h3>æ€§èƒ½æ”¹å–„åº¦</h3>
                    <div class="progress-bar">
                        <div class="progress-fill" id="performanceProgress" style="width: 0%"></div>
                    </div>
                    <span id="performanceValue">æ¸¬å®šä¸­...</span>
                </div>
            </div>
        </div>
        
        <div class="test-section">
            <h2>ğŸ¯ ç‰¹å¾´é‡è©³ç´°è¡¨ç¤º</h2>
            <div id="featureDetails">
                <p>ç‰¹å¾´é‡åˆ†æå®Ÿè¡Œå¾Œã€è©³ç´°ãªç‰¹å¾´é‡ãƒªã‚¹ãƒˆã‚’è¡¨ç¤ºã—ã¾ã™</p>
            </div>
        </div>
        
        <div class="test-section">
            <h2>ğŸ“ˆ åˆ†æãƒãƒ£ãƒ¼ãƒˆ</h2>
            <div class="analysis-chart" id="analysisChart">
                <p>ç‰¹å¾´é‡é‡è¦åº¦åˆ†å¸ƒãƒãƒ£ãƒ¼ãƒˆï¼ˆåˆ†æå®Ÿè¡Œå¾Œã«è¡¨ç¤ºï¼‰</p>
            </div>
        </div>
    </div>

    <!-- å¿…è¦ãªã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ãƒ­ãƒ¼ãƒ‰ -->
    <script src="../js/config.js"></script>
    <script src="../js/multiDimensionalFeatureAnalyzer.js"></script>

    <script>
        // ãƒ†ã‚¹ãƒˆç”¨ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ
        function generateTestRaceData() {
            const horses = [];
            for (let i = 0; i < 12; i++) {
                horses.push({
                    name: `TestHorse${i + 1}`,
                    odds: Math.random() * 30 + 1,
                    popularity: i + 1,
                    age: Math.floor(Math.random() * 6) + 3,
                    weight: Math.floor(Math.random() * 100) + 400,
                    jockey: `é¨æ‰‹${i + 1}`,
                    trainer: `èª¿æ•™å¸«${i + 1}`,
                    runningStyle: ['é€ƒã’', 'å…ˆè¡Œ', 'å·®ã—', 'è¿½è¾¼'][Math.floor(Math.random() * 4)],
                    raceHistory: generateRaceHistory()
                });
            }
            
            return {
                horses: horses,
                distance: 2000,
                trackCondition: 'è‰¯',
                weather: 'æ™´',
                raceClass: 'G1',
                venue: 'æ±äº¬'
            };
        }
        
        function generateRaceHistory() {
            const history = [];
            for (let i = 0; i < 8; i++) {
                history.push({
                    date: new Date(Date.now() - i * 30 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
                    position: Math.floor(Math.random() * 12) + 1,
                    distance: Math.floor(Math.random() * 2000) + 1000,
                    trackCondition: ['è‰¯', 'ç¨é‡', 'é‡'][Math.floor(Math.random() * 3)]
                });
            }
            return history;
        }
        
        function generateHistoricalData() {
            const historicalData = [];
            for (let i = 0; i < 50; i++) {
                historicalData.push({
                    date: new Date(Date.now() - i * 7 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
                    raceData: generateTestRaceData(),
                    results: {
                        first: `TestHorse${Math.floor(Math.random() * 12) + 1}`,
                        second: `TestHorse${Math.floor(Math.random() * 12) + 1}`,
                        third: `TestHorse${Math.floor(Math.random() * 12) + 1}`
                    }
                });
            }
            return historicalData;
        }
        
        // å®Œå…¨åˆ†æå®Ÿè¡Œ
        function testFullAnalysis() {
            console.log('ğŸ”„ å®Œå…¨å¤šæ¬¡å…ƒç‰¹å¾´é‡åˆ†æãƒ†ã‚¹ãƒˆé–‹å§‹');
            const results = document.getElementById('analysisResults');
            results.innerHTML = '<div class="info-card"><h4>å®Œå…¨åˆ†æå®Ÿè¡Œä¸­...</h4></div>';
            
            if (typeof MultiDimensionalFeatureAnalyzer === 'undefined') {
                results.innerHTML = '<div class="error-card"><h4>âŒ å¤šæ¬¡å…ƒç‰¹å¾´é‡åˆ†æã‚·ã‚¹ãƒ†ãƒ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“</h4></div>';
                return;
            }
            
            // ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ
            const testRaceData = generateTestRaceData();
            const historicalData = generateHistoricalData();
            
            // å®Œå…¨åˆ†æå®Ÿè¡Œ
            const analysisResult = MultiDimensionalFeatureAnalyzer.performMultiDimensionalAnalysis(testRaceData, historicalData);
            
            // çµæœè¡¨ç¤º
            results.innerHTML = `
                <div class="result-card">
                    <h4>ğŸ”„ å®Œå…¨å¤šæ¬¡å…ƒç‰¹å¾´é‡åˆ†æçµæœ</h4>
                    <p><strong>åŸºæœ¬ç‰¹å¾´é‡æ•°:</strong> ${analysisResult.baseFeatures.length}å€‹</p>
                    <p><strong>å·¥å­¦ç‰¹å¾´é‡æ•°:</strong> ${analysisResult.engineeredFeatures.length}å€‹</p>
                    <p><strong>å‰Šæ¸›å¾Œç‰¹å¾´é‡æ•°:</strong> ${analysisResult.reducedFeatures.length}å€‹</p>
                    <p><strong>ç™ºè¦‹ç‰¹å¾´é‡æ•°:</strong> ${analysisResult.discoveredFeatures.length}å€‹</p>
                    <p><strong>é¸æŠç‰¹å¾´é‡æ•°:</strong> ${analysisResult.selectedFeatures.length}å€‹</p>
                    <p><strong>æ€§èƒ½æ”¹å–„åº¦:</strong> ${(analysisResult.performanceMetrics.improvement * 100).toFixed(1)}%</p>
                    <p><strong>å‰Šæ¸›ç‡:</strong> ${(analysisResult.featureStatistics.reductionRatio * 100).toFixed(1)}%</p>
                </div>
            `;
            
            // ãƒ¡ãƒˆãƒªã‚¯ã‚¹æ›´æ–°
            updateProgressBar('baseFeatureProgress', 'baseFeatureValue', analysisResult.baseFeatures.length, 'å€‹');
            updateProgressBar('engineeredFeatureProgress', 'engineeredFeatureValue', analysisResult.engineeredFeatures.length, 'å€‹');
            updateProgressBar('discoveredFeatureProgress', 'discoveredFeatureValue', analysisResult.discoveredFeatures.length, 'å€‹');
            updateProgressBar('performanceProgress', 'performanceValue', analysisResult.performanceMetrics.improvement * 100, '%');
            
            // ç‰¹å¾´é‡è©³ç´°è¡¨ç¤º
            displayFeatureDetails(analysisResult);
            
            // ãƒãƒ£ãƒ¼ãƒˆæ›´æ–°
            updateAnalysisChart(analysisResult);
        }
        
        // åŸºæœ¬ç‰¹å¾´é‡æŠ½å‡ºãƒ†ã‚¹ãƒˆ
        function testBaseFeatureExtraction() {
            console.log('ğŸ“Š åŸºæœ¬ç‰¹å¾´é‡æŠ½å‡ºãƒ†ã‚¹ãƒˆ');
            const results = document.getElementById('analysisResults');
            
            const testRaceData = generateTestRaceData();
            const baseFeatures = MultiDimensionalFeatureAnalyzer.extractBaseFeatures(testRaceData);
            
            results.innerHTML += `
                <div class="result-card">
                    <h4>ğŸ“Š åŸºæœ¬ç‰¹å¾´é‡æŠ½å‡ºçµæœ</h4>
                    <p><strong>æŠ½å‡ºç‰¹å¾´é‡æ•°:</strong> ${baseFeatures.length}å€‹</p>
                    <p><strong>ã‚«ãƒ†ã‚´ãƒªåˆ¥å†…è¨³:</strong></p>
                    <ul>
                        <li>åŸºæœ¬çµ±è¨ˆ: ${baseFeatures.filter(f => f.category === 'basic').length}å€‹</li>
                        <li>å±¥æ­´ãƒ™ãƒ¼ã‚¹: ${baseFeatures.filter(f => f.category === 'historical').length}å€‹</li>
                        <li>ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ: ${baseFeatures.filter(f => f.category === 'contextual').length}å€‹</li>
                        <li>ç’°å¢ƒ: ${baseFeatures.filter(f => f.category === 'environment').length}å€‹</li>
                    </ul>
                </div>
            `;
            
            updateProgressBar('baseFeatureProgress', 'baseFeatureValue', baseFeatures.length, 'å€‹');
        }
        
        // ç‰¹å¾´é‡å·¥å­¦ãƒ†ã‚¹ãƒˆ
        function testFeatureEngineering() {
            console.log('ğŸ”§ ç‰¹å¾´é‡å·¥å­¦ãƒ†ã‚¹ãƒˆ');
            const results = document.getElementById('analysisResults');
            
            const testRaceData = generateTestRaceData();
            const historicalData = generateHistoricalData();
            const baseFeatures = MultiDimensionalFeatureAnalyzer.extractBaseFeatures(testRaceData);
            const engineeredFeatures = MultiDimensionalFeatureAnalyzer.applyFeatureEngineering(baseFeatures, historicalData);
            
            results.innerHTML += `
                <div class="result-card">
                    <h4>ğŸ”§ ç‰¹å¾´é‡å·¥å­¦å®Ÿè¡Œçµæœ</h4>
                    <p><strong>å…ƒç‰¹å¾´é‡æ•°:</strong> ${baseFeatures.length}å€‹</p>
                    <p><strong>å·¥å­¦å¾Œç‰¹å¾´é‡æ•°:</strong> ${engineeredFeatures.length}å€‹</p>
                    <p><strong>å¢—åŠ ç‰¹å¾´é‡æ•°:</strong> ${engineeredFeatures.length - baseFeatures.length}å€‹</p>
                    <p><strong>ã‚«ãƒ†ã‚´ãƒªåˆ¥å†…è¨³:</strong></p>
                    <ul>
                        <li>å¤šé …å¼: ${engineeredFeatures.filter(f => f.category === 'polynomial').length}å€‹</li>
                        <li>ç›¸äº’ä½œç”¨: ${engineeredFeatures.filter(f => f.category === 'interaction').length}å€‹</li>
                        <li>å¤‰æ›: ${engineeredFeatures.filter(f => f.category === 'transformation').length}å€‹</li>
                        <li>ãƒ“ãƒ‹ãƒ³ã‚°: ${engineeredFeatures.filter(f => f.category === 'binning').length}å€‹</li>
                    </ul>
                </div>
            `;
            
            updateProgressBar('engineeredFeatureProgress', 'engineeredFeatureValue', engineeredFeatures.length, 'å€‹');
        }
        
        // æ¬¡å…ƒå‰Šæ¸›ãƒ†ã‚¹ãƒˆ
        function testDimensionReduction() {
            console.log('ğŸ“‰ æ¬¡å…ƒå‰Šæ¸›ãƒ†ã‚¹ãƒˆ');
            const results = document.getElementById('analysisResults');
            
            const testRaceData = generateTestRaceData();
            const historicalData = generateHistoricalData();
            const baseFeatures = MultiDimensionalFeatureAnalyzer.extractBaseFeatures(testRaceData);
            const engineeredFeatures = MultiDimensionalFeatureAnalyzer.applyFeatureEngineering(baseFeatures, historicalData);
            const reducedFeatures = MultiDimensionalFeatureAnalyzer.performDimensionReduction(engineeredFeatures);
            
            results.innerHTML += `
                <div class="result-card">
                    <h4>ğŸ“‰ æ¬¡å…ƒå‰Šæ¸›å®Ÿè¡Œçµæœ</h4>
                    <p><strong>å‰Šæ¸›å‰ç‰¹å¾´é‡æ•°:</strong> ${engineeredFeatures.length}å€‹</p>
                    <p><strong>å‰Šæ¸›å¾Œç‰¹å¾´é‡æ•°:</strong> ${reducedFeatures.length}å€‹</p>
                    <p><strong>å‰Šæ¸›ç‡:</strong> ${((engineeredFeatures.length - reducedFeatures.length) / engineeredFeatures.length * 100).toFixed(1)}%</p>
                    <p><strong>æ¬¡å…ƒå‰Šæ¸›æ‰‹æ³•:</strong> ç›¸é–¢é™¤å» + åˆ†æ•£é¸æŠ + PCA</p>
                </div>
            `;
        }
        
        // ç‰¹å¾´é‡ç™ºè¦‹ãƒ†ã‚¹ãƒˆ
        function testFeatureDiscovery() {
            console.log('ğŸ” ç‰¹å¾´é‡ç™ºè¦‹ãƒ†ã‚¹ãƒˆ');
            const results = document.getElementById('discoveryResults');
            
            const testRaceData = generateTestRaceData();
            const historicalData = generateHistoricalData();
            const baseFeatures = MultiDimensionalFeatureAnalyzer.extractBaseFeatures(testRaceData);
            const engineeredFeatures = MultiDimensionalFeatureAnalyzer.applyFeatureEngineering(baseFeatures, historicalData);
            const reducedFeatures = MultiDimensionalFeatureAnalyzer.performDimensionReduction(engineeredFeatures);
            const discoveredFeatures = MultiDimensionalFeatureAnalyzer.discoverNewFeatures(reducedFeatures, historicalData);
            
            results.innerHTML = `
                <div class="result-card">
                    <h4>ğŸ” ç‰¹å¾´é‡è‡ªå‹•ç™ºè¦‹çµæœ</h4>
                    <p><strong>ç™ºè¦‹ç‰¹å¾´é‡æ•°:</strong> ${discoveredFeatures.length}å€‹</p>
                    <p><strong>å¹³å‡é‡è¦åº¦:</strong> ${(discoveredFeatures.reduce((sum, f) => sum + f.importance, 0) / discoveredFeatures.length).toFixed(3)}</p>
                    <p><strong>ç™ºè¦‹ã‚«ãƒ†ã‚´ãƒª:</strong> ãƒ‘ã‚¿ãƒ¼ãƒ³ã€çµ±è¨ˆã€çµ„ã¿åˆã‚ã›</p>
                    <p><strong>ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°:</strong> é‡è¦åº¦ â‰¥ 0.05</p>
                </div>
            `;
            
            updateProgressBar('discoveredFeatureProgress', 'discoveredFeatureValue', discoveredFeatures.length, 'å€‹');
        }
        
        // ç‰¹å¾´é‡é¸æŠãƒ†ã‚¹ãƒˆ
        function testFeatureSelection() {
            console.log('ğŸ¯ ç‰¹å¾´é‡é¸æŠãƒ†ã‚¹ãƒˆ');
            const results = document.getElementById('discoveryResults');
            
            // ç°¡æ˜“ãƒ†ã‚¹ãƒˆç”¨ç‰¹å¾´é‡ç”Ÿæˆ
            const testFeatures = [];
            for (let i = 0; i < 25; i++) {
                testFeatures.push({
                    name: `test_feature_${i}`,
                    value: Math.random(),
                    importance: Math.random(),
                    category: 'test'
                });
            }
            
            const selectedFeatures = MultiDimensionalFeatureAnalyzer.optimizeFeatureSelection(testFeatures);
            
            results.innerHTML += `
                <div class="result-card">
                    <h4>ğŸ¯ ç‰¹å¾´é‡é¸æŠæœ€é©åŒ–çµæœ</h4>
                    <p><strong>å€™è£œç‰¹å¾´é‡æ•°:</strong> ${testFeatures.length}å€‹</p>
                    <p><strong>é¸æŠç‰¹å¾´é‡æ•°:</strong> ${selectedFeatures.length}å€‹</p>
                    <p><strong>é¸æŠç‡:</strong> ${(selectedFeatures.length / testFeatures.length * 100).toFixed(1)}%</p>
                    <p><strong>é¸æŠæ‰‹æ³•:</strong> ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«é¸æŠ + å®‰å®šæ€§è©•ä¾¡</p>
                </div>
            `;
        }
        
        // ç‰¹å¾´é‡é‡è¦åº¦ãƒ†ã‚¹ãƒˆ
        function testFeatureImportance() {
            console.log('ğŸ“Š ç‰¹å¾´é‡é‡è¦åº¦ãƒ†ã‚¹ãƒˆ');
            const results = document.getElementById('discoveryResults');
            
            // ç°¡æ˜“ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
            const testFeatures = [];
            for (let i = 0; i < 10; i++) {
                testFeatures.push({
                    name: `feature_${i}`,
                    value: Math.random(),
                    importance: Math.random(),
                    category: 'test'
                });
            }
            
            const importanceScores = MultiDimensionalFeatureAnalyzer.evaluateFeatureImportance(testFeatures);
            
            results.innerHTML += `
                <div class="result-card">
                    <h4>ğŸ“Š ç‰¹å¾´é‡é‡è¦åº¦è©•ä¾¡çµæœ</h4>
                    <p><strong>è©•ä¾¡ç‰¹å¾´é‡æ•°:</strong> ${importanceScores.length}å€‹</p>
                    <p><strong>æœ€é«˜é‡è¦åº¦:</strong> ${Math.max(...importanceScores.map(s => s.importance)).toFixed(3)}</p>
                    <p><strong>æœ€ä½é‡è¦åº¦:</strong> ${Math.min(...importanceScores.map(s => s.importance)).toFixed(3)}</p>
                    <p><strong>å¹³å‡é‡è¦åº¦:</strong> ${(importanceScores.reduce((sum, s) => sum + s.importance, 0) / importanceScores.length).toFixed(3)}</p>
                </div>
            `;
        }
        
        // æ€§èƒ½è©•ä¾¡ãƒ†ã‚¹ãƒˆ
        function testPerformanceEvaluation() {
            console.log('ğŸ“ˆ æ€§èƒ½è©•ä¾¡ãƒ†ã‚¹ãƒˆ');
            const results = document.getElementById('discoveryResults');
            
            // ç°¡æ˜“ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
            const testFeatures = [];
            for (let i = 0; i < 15; i++) {
                testFeatures.push({
                    name: `feature_${i}`,
                    value: Math.random(),
                    importance: Math.random(),
                    category: 'test'
                });
            }
            
            const performanceMetrics = MultiDimensionalFeatureAnalyzer.evaluateFeaturePerformance(testFeatures);
            
            results.innerHTML += `
                <div class="result-card">
                    <h4>ğŸ“ˆ ç‰¹å¾´é‡æ€§èƒ½è©•ä¾¡çµæœ</h4>
                    <p><strong>äº¤å·®æ¤œè¨¼ç²¾åº¦:</strong> ${(performanceMetrics.crossValidation.accuracy * 100).toFixed(1)}%</p>
                    <p><strong>äºˆæ¸¬ç²¾åº¦:</strong> ${(performanceMetrics.prediction.accuracy * 100).toFixed(1)}%</p>
                    <p><strong>ç²¾å¯†åº¦:</strong> ${(performanceMetrics.prediction.precision * 100).toFixed(1)}%</p>
                    <p><strong>å†ç¾ç‡:</strong> ${(performanceMetrics.prediction.recall * 100).toFixed(1)}%</p>
                    <p><strong>ç·åˆæ”¹å–„åº¦:</strong> ${(performanceMetrics.improvement * 100).toFixed(1)}%</p>
                </div>
            `;
            
            updateProgressBar('performanceProgress', 'performanceValue', performanceMetrics.improvement * 100, '%');
        }
        
        // ç‰¹å¾´é‡è©³ç´°è¡¨ç¤º
        function displayFeatureDetails(analysisResult) {
            const details = document.getElementById('featureDetails');
            
            const topFeatures = analysisResult.selectedFeatures.slice(0, 20);
            
            let featureListHTML = '<div class="feature-list">';
            topFeatures.forEach((feature, index) => {
                const importanceWidth = (feature.importance * 100).toFixed(0);
                featureListHTML += `
                    <div class="feature-item">
                        <strong>${index + 1}. ${feature.name}</strong>
                        <span class="feature-importance">
                            <div class="feature-importance-fill" style="width: ${importanceWidth}%"></div>
                        </span>
                        <span>(${feature.importance.toFixed(3)})</span>
                    </div>
                `;
            });
            featureListHTML += '</div>';
            
            details.innerHTML = `
                <div class="info-card">
                    <h4>ğŸ¯ ä¸Šä½ç‰¹å¾´é‡ä¸€è¦§ (Top 20)</h4>
                    ${featureListHTML}
                </div>
            `;
        }
        
        // åˆ†æãƒãƒ£ãƒ¼ãƒˆæ›´æ–°
        function updateAnalysisChart(analysisResult) {
            const chart = document.getElementById('analysisChart');
            
            // ç°¡æ˜“ãƒãƒ£ãƒ¼ãƒˆè¡¨ç¤º
            const categories = ['åŸºæœ¬', 'å·¥å­¦', 'ç™ºè¦‹', 'é¸æŠ'];
            const values = [
                analysisResult.baseFeatures.length,
                analysisResult.engineeredFeatures.length - analysisResult.baseFeatures.length,
                analysisResult.discoveredFeatures.length,
                analysisResult.selectedFeatures.length
            ];
            
            let chartHTML = '<h4>ğŸ“Š ç‰¹å¾´é‡åˆ†æçµæœãƒãƒ£ãƒ¼ãƒˆ</h4>';
            chartHTML += '<div style="display: flex; align-items: end; height: 200px; gap: 10px;">';
            
            categories.forEach((category, index) => {
                const height = Math.max(20, (values[index] / Math.max(...values)) * 180);
                chartHTML += `
                    <div style="flex: 1; display: flex; flex-direction: column; align-items: center;">
                        <div style="width: 60px; height: ${height}px; background: linear-gradient(45deg, #667eea, #764ba2); border-radius: 5px 5px 0 0; margin-bottom: 5px;"></div>
                        <div style="font-size: 12px; text-align: center;">${category}</div>
                        <div style="font-size: 14px; font-weight: bold;">${values[index]}</div>
                    </div>
                `;
            });
            
            chartHTML += '</div>';
            chart.innerHTML = chartHTML;
        }
        
        // ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼æ›´æ–°
        function updateProgressBar(progressId, valueId, percentage, suffix) {
            const normalizedPercentage = Math.min(100, Math.max(0, percentage));
            document.getElementById(progressId).style.width = normalizedPercentage + '%';
            document.getElementById(valueId).textContent = percentage.toFixed(1) + suffix;
        }
        
        // åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ” å¤šæ¬¡å…ƒç‰¹å¾´é‡åˆ†æãƒ»è‡ªå‹•ç™ºè¦‹ã‚·ã‚¹ãƒ†ãƒ ãƒ†ã‚¹ãƒˆåˆæœŸåŒ–å®Œäº†');
        });
    </script>
</body>
</html>