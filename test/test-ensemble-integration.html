<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«çµ±åˆãƒ†ã‚¹ãƒˆ</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .container { max-width: 1400px; margin: 0 auto; background: white; padding: 20px; border-radius: 10px; }
        .test-section { background: #fff; border: 1px solid #ddd; border-radius: 8px; padding: 15px; margin: 15px 0; }
        .btn { background: linear-gradient(45deg, #667eea, #764ba2); color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin: 5px; }
        .btn:hover { transform: translateY(-1px); }
        .btn-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; margin: 15px 0; }
        .result-card { background: #f8f9fa; border-left: 4px solid #28a745; padding: 15px; margin: 10px 0; border-radius: 5px; }
        .error-card { background: #f8f9fa; border-left: 4px solid #dc3545; padding: 15px; margin: 10px 0; border-radius: 5px; }
        .warning-card { background: #fff3cd; border-left: 4px solid #ffc107; padding: 15px; margin: 10px 0; border-radius: 5px; }
        .info-card { background: #e3f2fd; border-left: 4px solid #2196f3; padding: 15px; margin: 10px 0; border-radius: 5px; }
        .comparison-table { width: 100%; border-collapse: collapse; margin: 15px 0; }
        .comparison-table th, .comparison-table td { border: 1px solid #ddd; padding: 8px; text-align: center; }
        .comparison-table th { background: #f2f2f2; }
        .score-bar { height: 20px; background: #e0e0e0; border-radius: 10px; overflow: hidden; position: relative; }
        .score-fill { height: 100%; border-radius: 10px; }
        .score-ensemble { background: linear-gradient(45deg, #4caf50, #8bc34a); }
        .score-basic { background: linear-gradient(45deg, #2196f3, #64b5f6); }
        .score-enhanced { background: linear-gradient(45deg, #ff9800, #ffb74d); }
        .metrics-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin: 15px 0; }
        .metric-card { background: #e3f2fd; padding: 15px; border-radius: 8px; text-align: center; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¯ ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«ã‚·ã‚¹ãƒ†ãƒ çµ±åˆãƒ†ã‚¹ãƒˆ</h1>
        
        <div class="test-section">
            <h2>ğŸ” çµ±åˆãƒ†ã‚¹ãƒˆå®Ÿè¡Œ</h2>
            <p>äºˆæ¸¬ã‚¨ãƒ³ã‚¸ãƒ³ã¨æ‹¡å¼µæ¨å¥¨ã‚·ã‚¹ãƒ†ãƒ ã®é€£æºã‚’ãƒ†ã‚¹ãƒˆã—ã¾ã™</p>
            
            <div class="btn-grid">
                <button class="btn" onclick="testBasicPredictions()">ğŸ”¹ åŸºæœ¬äºˆæ¸¬ãƒ†ã‚¹ãƒˆ</button>
                <button class="btn" onclick="testEnsembleIntegration()">ğŸ¯ ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«çµ±åˆãƒ†ã‚¹ãƒˆ</button>
                <button class="btn" onclick="testRecommendationIntegration()">ğŸ“Š æ¨å¥¨ã‚·ã‚¹ãƒ†ãƒ çµ±åˆãƒ†ã‚¹ãƒˆ</button>
                <button class="btn" onclick="testScaleConsistency()">âš–ï¸ ã‚¹ã‚±ãƒ¼ãƒ«ä¸€è²«æ€§ãƒ†ã‚¹ãƒˆ</button>
            </div>
            
            <div id="testResults"></div>
        </div>
        
        <div class="test-section">
            <h2>ğŸ“Š äºˆæ¸¬å€¤æ¯”è¼ƒ</h2>
            <div id="predictionComparison">
                <p>çµ±åˆãƒ†ã‚¹ãƒˆå®Ÿè¡Œå¾Œã€äºˆæ¸¬å€¤æ¯”è¼ƒã‚’è¡¨ç¤ºã—ã¾ã™</p>
            </div>
        </div>
        
        <div class="test-section">
            <h2>ğŸ“ˆ çµ±åˆåŠ¹æœãƒ¡ãƒˆãƒªã‚¯ã‚¹</h2>
            <div class="metrics-grid">
                <div class="metric-card">
                    <h3>ãƒ‡ãƒ¼ã‚¿ä¼é”</h3>
                    <div id="dataTransferStatus">æœªãƒ†ã‚¹ãƒˆ</div>
                </div>
                <div class="metric-card">
                    <h3>ã‚¹ã‚±ãƒ¼ãƒ«ä¸€è²«æ€§</h3>
                    <div id="scaleConsistencyStatus">æœªãƒ†ã‚¹ãƒˆ</div>
                </div>
                <div class="metric-card">
                    <h3>çµ±åˆåŠ¹æœ</h3>
                    <div id="integrationEffectStatus">æœªãƒ†ã‚¹ãƒˆ</div>
                </div>
                <div class="metric-card">
                    <h3>ã‚·ã‚¹ãƒ†ãƒ å®‰å®šæ€§</h3>
                    <div id="systemStabilityStatus">æœªãƒ†ã‚¹ãƒˆ</div>
                </div>
            </div>
        </div>
    </div>

    <!-- å¿…è¦ãªã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ãƒ­ãƒ¼ãƒ‰ -->
    <script src="../js/config.js"></script>
    <script src="../js/predictionEngine.js"></script>
    <script src="../js/enhancedLearningSystem.js"></script>
    <script src="../js/bettingRecommender.js"></script>
    <script src="../js/reliabilityFilter.js"></script>
    <script src="../js/hitCriteriaSystem.js"></script>
    <script src="../js/dynamicRecommendationAdjuster.js"></script>

    <script>
        // ãƒ†ã‚¹ãƒˆç”¨ãƒ‡ãƒ¼ã‚¿
        let testHorses = [];
        let testResults = {};
        
        // ãƒ†ã‚¹ãƒˆç”¨é¦¬ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ
        function generateTestHorses() {
            const horses = [];
            const names = ['ãƒ†ã‚¹ãƒˆãƒ›ãƒ¼ã‚¹1', 'ãƒ†ã‚¹ãƒˆãƒ›ãƒ¼ã‚¹2', 'ãƒ†ã‚¹ãƒˆãƒ›ãƒ¼ã‚¹3', 'ãƒ†ã‚¹ãƒˆãƒ›ãƒ¼ã‚¹4', 'ãƒ†ã‚¹ãƒˆãƒ›ãƒ¼ã‚¹5'];
            
            for (let i = 0; i < 5; i++) {
                horses.push({
                    name: names[i],
                    number: i + 1,
                    odds: Math.random() * 15 + 2,
                    popularity: i + 1,
                    age: Math.floor(Math.random() * 5) + 3,
                    weight: Math.floor(Math.random() * 80) + 420,
                    jockey: `é¨æ‰‹${i + 1}`,
                    runningStyle: ['é€ƒã’', 'å…ˆè¡Œ', 'å·®ã—', 'è¿½è¾¼'][Math.floor(Math.random() * 4)],
                    raceHistory: generateRaceHistory()
                });
            }
            
            return horses;
        }
        
        // ãƒ†ã‚¹ãƒˆç”¨ãƒ¬ãƒ¼ã‚¹å±¥æ­´ç”Ÿæˆ
        function generateRaceHistory() {
            const history = [];
            for (let i = 0; i < 5; i++) {
                history.push({
                    date: new Date(Date.now() - i * 30 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
                    position: Math.floor(Math.random() * 12) + 1,
                    distance: Math.floor(Math.random() * 1000) + 1200,
                    trackCondition: ['è‰¯', 'ç¨é‡', 'é‡'][Math.floor(Math.random() * 3)]
                });
            }
            return history;
        }
        
        // åŸºæœ¬äºˆæ¸¬ãƒ†ã‚¹ãƒˆ
        function testBasicPredictions() {
            console.log('ğŸ”¹ åŸºæœ¬äºˆæ¸¬ãƒ†ã‚¹ãƒˆé–‹å§‹');
            const results = document.getElementById('testResults');
            results.innerHTML = '<div class="info-card"><h4>åŸºæœ¬äºˆæ¸¬ãƒ†ã‚¹ãƒˆå®Ÿè¡Œä¸­...</h4></div>';
            
            testHorses = generateTestHorses();
            
            // ã‚°ãƒ­ãƒ¼ãƒãƒ«é¦¬ãƒ‡ãƒ¼ã‚¿è¨­å®š
            window.horses = testHorses;
            
            // åŸºæœ¬äºˆæ¸¬è¨ˆç®—
            try {
                PredictionEngine.calculatePredictions();
                const predictions = PredictionEngine.currentPredictions;
                
                testResults.basicPredictions = predictions;
                
                results.innerHTML = `
                    <div class="result-card">
                        <h4>ğŸ”¹ åŸºæœ¬äºˆæ¸¬ãƒ†ã‚¹ãƒˆçµæœ</h4>
                        <p><strong>äºˆæ¸¬é¦¬æ•°:</strong> ${predictions.length}é ­</p>
                        <p><strong>å‹ç‡åˆè¨ˆ:</strong> ${predictions.reduce((sum, p) => sum + p.winProbability, 0).toFixed(1)}%</p>
                        <p><strong>æœ€é«˜å‹ç‡:</strong> ${Math.max(...predictions.map(p => p.winProbability)).toFixed(1)}%</p>
                        <p><strong>æœ€ä½å‹ç‡:</strong> ${Math.min(...predictions.map(p => p.winProbability)).toFixed(1)}%</p>
                    </div>
                `;
                
                updateMetricStatus('systemStabilityStatus', 'æ­£å¸¸', '#28a745');
            } catch (error) {
                console.error('åŸºæœ¬äºˆæ¸¬ãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼:', error);
                results.innerHTML = `<div class="error-card"><h4>âŒ åŸºæœ¬äºˆæ¸¬ãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼</h4><p>${error.message}</p></div>`;
                updateMetricStatus('systemStabilityStatus', 'ã‚¨ãƒ©ãƒ¼', '#dc3545');
            }
        }
        
        // ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«çµ±åˆãƒ†ã‚¹ãƒˆ
        function testEnsembleIntegration() {
            console.log('ğŸ¯ ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«çµ±åˆãƒ†ã‚¹ãƒˆé–‹å§‹');
            const results = document.getElementById('testResults');
            
            if (!testResults.basicPredictions) {
                results.innerHTML = '<div class="warning-card"><h4>âš ï¸ åŸºæœ¬äºˆæ¸¬ãƒ†ã‚¹ãƒˆã‚’å…ˆã«å®Ÿè¡Œã—ã¦ãã ã•ã„</h4></div>';
                return;
            }
            
            results.innerHTML += '<div class="info-card"><h4>ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«çµ±åˆãƒ†ã‚¹ãƒˆå®Ÿè¡Œä¸­...</h4></div>';
            
            try {
                // ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«çµæœç¢ºèª
                const ensembleData = window.lastEnsembleResult;
                
                if (ensembleData) {
                    console.log('âœ… ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«ãƒ‡ãƒ¼ã‚¿å–å¾—æˆåŠŸ:', ensembleData);
                    
                    results.innerHTML += `
                        <div class="result-card">
                            <h4>ğŸ¯ ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«çµ±åˆãƒ†ã‚¹ãƒˆçµæœ</h4>
                            <p><strong>ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«ä¿¡é ¼åº¦:</strong> ${(ensembleData.confidence * 100).toFixed(1)}%</p>
                            <p><strong>äºˆæ¸¬æ•°:</strong> ${ensembleData.predictions.length}ä»¶</p>
                            <p><strong>ãƒ‡ãƒ¼ã‚¿ä¼é”:</strong> âœ… æˆåŠŸ</p>
                        </div>
                    `;
                    
                    updateMetricStatus('dataTransferStatus', 'æˆåŠŸ', '#28a745');
                    
                    // ã‚¹ã‚±ãƒ¼ãƒ«ä¸€è²«æ€§ãƒã‚§ãƒƒã‚¯
                    testResults.ensembleData = ensembleData;
                    checkScaleConsistency();
                    
                } else {
                    results.innerHTML += `<div class="error-card"><h4>âŒ ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«ãƒ‡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“</h4></div>`;
                    updateMetricStatus('dataTransferStatus', 'å¤±æ•—', '#dc3545');
                }
                
            } catch (error) {
                console.error('ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«çµ±åˆãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼:', error);
                results.innerHTML += `<div class="error-card"><h4>âŒ ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«çµ±åˆã‚¨ãƒ©ãƒ¼</h4><p>${error.message}</p></div>`;
                updateMetricStatus('dataTransferStatus', 'ã‚¨ãƒ©ãƒ¼', '#dc3545');
            }
        }
        
        // æ¨å¥¨ã‚·ã‚¹ãƒ†ãƒ çµ±åˆãƒ†ã‚¹ãƒˆ
        function testRecommendationIntegration() {
            console.log('ğŸ“Š æ¨å¥¨ã‚·ã‚¹ãƒ†ãƒ çµ±åˆãƒ†ã‚¹ãƒˆé–‹å§‹');
            const results = document.getElementById('testResults');
            
            if (!testResults.basicPredictions) {
                results.innerHTML += '<div class="warning-card"><h4>âš ï¸ åŸºæœ¬äºˆæ¸¬ãƒ†ã‚¹ãƒˆã‚’å…ˆã«å®Ÿè¡Œã—ã¦ãã ã•ã„</h4></div>';
                return;
            }
            
            results.innerHTML += '<div class="info-card"><h4>æ¨å¥¨ã‚·ã‚¹ãƒ†ãƒ çµ±åˆãƒ†ã‚¹ãƒˆå®Ÿè¡Œä¸­...</h4></div>';
            
            try {
                // æ¨å¥¨ã‚·ã‚¹ãƒ†ãƒ ã§ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«ãƒ‡ãƒ¼ã‚¿ä½¿ç”¨ã‚’ãƒ†ã‚¹ãƒˆ
                BettingRecommender.generateBettingRecommendations(testResults.basicPredictions);
                
                const recommendations = window.lastBettingRecommendations;
                const ensembleData = window.lastEnsembleResult;
                
                let integrationStatus = 'æœªç¢ºèª';
                let integrationColor = '#ffc107';
                
                if (ensembleData && recommendations) {
                    integrationStatus = 'ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«ãƒ‡ãƒ¼ã‚¿çµ±åˆæ¸ˆã¿';
                    integrationColor = '#28a745';
                } else if (recommendations) {
                    integrationStatus = 'æ¨å¥¨ç”Ÿæˆã®ã¿';
                    integrationColor = '#ff9800';
                }
                
                results.innerHTML += `
                    <div class="result-card">
                        <h4>ğŸ“Š æ¨å¥¨ã‚·ã‚¹ãƒ†ãƒ çµ±åˆãƒ†ã‚¹ãƒˆçµæœ</h4>
                        <p><strong>æ¨å¥¨æ•°:</strong> ${recommendations ? recommendations.length : 0}ä»¶</p>
                        <p><strong>çµ±åˆçŠ¶æ³:</strong> ${integrationStatus}</p>
                        <p><strong>ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«ãƒ‡ãƒ¼ã‚¿:</strong> ${ensembleData ? 'âœ… åˆ©ç”¨å¯èƒ½' : 'âŒ æœªåˆ©ç”¨'}</p>
                    </div>
                `;
                
                updateMetricStatus('integrationEffectStatus', integrationStatus, integrationColor);
                
                // äºˆæ¸¬å€¤æ¯”è¼ƒè¡¨ç¤º
                displayPredictionComparison();
                
            } catch (error) {
                console.error('æ¨å¥¨ã‚·ã‚¹ãƒ†ãƒ çµ±åˆãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼:', error);
                results.innerHTML += `<div class="error-card"><h4>âŒ æ¨å¥¨ã‚·ã‚¹ãƒ†ãƒ çµ±åˆã‚¨ãƒ©ãƒ¼</h4><p>${error.message}</p></div>`;
                updateMetricStatus('integrationEffectStatus', 'ã‚¨ãƒ©ãƒ¼', '#dc3545');
            }
        }
        
        // ã‚¹ã‚±ãƒ¼ãƒ«ä¸€è²«æ€§ãƒ†ã‚¹ãƒˆ
        function testScaleConsistency() {
            console.log('âš–ï¸ ã‚¹ã‚±ãƒ¼ãƒ«ä¸€è²«æ€§ãƒ†ã‚¹ãƒˆé–‹å§‹');
            checkScaleConsistency();
        }
        
        // ã‚¹ã‚±ãƒ¼ãƒ«ä¸€è²«æ€§ãƒã‚§ãƒƒã‚¯
        function checkScaleConsistency() {
            const results = document.getElementById('testResults');
            
            if (!testResults.basicPredictions || !testResults.ensembleData) {
                results.innerHTML += '<div class="warning-card"><h4>âš ï¸ åŸºæœ¬äºˆæ¸¬ã¨ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«çµ±åˆãƒ†ã‚¹ãƒˆã‚’å…ˆã«å®Ÿè¡Œã—ã¦ãã ã•ã„</h4></div>';
                return;
            }
            
            try {
                const predictions = testResults.basicPredictions;
                const ensembleData = testResults.ensembleData;
                
                let consistencyIssues = [];
                let consistencyScore = 100;
                
                // å„é¦¬ã®ã‚¹ã‚±ãƒ¼ãƒ«ä¸€è²«æ€§ã‚’ãƒã‚§ãƒƒã‚¯
                predictions.forEach((prediction, index) => {
                    if (ensembleData.predictions[index]) {
                        const ensemblePred = ensembleData.predictions[index];
                        
                        // enhancedScoreãŒ0-100ç¯„å›²å†…ã‹ãƒã‚§ãƒƒã‚¯
                        if (prediction.enhancedScore < 0 || prediction.enhancedScore > 100) {
                            consistencyIssues.push(`${prediction.name}: enhancedScoreç¯„å›²å¤– (${prediction.enhancedScore.toFixed(2)})`);
                            consistencyScore -= 10;
                        }
                        
                        // winProbabilityãŒ0-100ç¯„å›²å†…ã‹ãƒã‚§ãƒƒã‚¯
                        if (prediction.winProbability < 0 || prediction.winProbability > 100) {
                            consistencyIssues.push(`${prediction.name}: winProbabilityç¯„å›²å¤– (${prediction.winProbability.toFixed(2)})`);
                            consistencyScore -= 10;
                        }
                        
                        // ensemblePredictionï¼ˆ0-1ï¼‰ã¨enhancedScoreï¼ˆ0-100ï¼‰ã®ä¸€è²«æ€§ãƒã‚§ãƒƒã‚¯
                        const expectedEnhancedScore = ensemblePred.ensemblePrediction * 100;
                        const scoreDifference = Math.abs(prediction.enhancedScore - expectedEnhancedScore);
                        
                        if (scoreDifference > 0.1) {
                            consistencyIssues.push(`${prediction.name}: ã‚¹ã‚±ãƒ¼ãƒ«å¤‰æ›ä¸æ•´åˆ (å·®åˆ†: ${scoreDifference.toFixed(2)})`);
                            consistencyScore -= 5;
                        }
                    }
                });
                
                // å‹ç‡åˆè¨ˆã®æ­£è¦åŒ–ãƒã‚§ãƒƒã‚¯
                const totalWinProbability = predictions.reduce((sum, p) => sum + p.winProbability, 0);
                if (Math.abs(totalWinProbability - 100) > 1) {
                    consistencyIssues.push(`å‹ç‡åˆè¨ˆãŒ100%ã§ãªã„ (${totalWinProbability.toFixed(1)}%)`);
                    consistencyScore -= 15;
                }
                
                const statusColor = consistencyScore >= 90 ? '#28a745' : consistencyScore >= 70 ? '#ffc107' : '#dc3545';
                const statusText = consistencyScore >= 90 ? 'è‰¯å¥½' : consistencyScore >= 70 ? 'æ³¨æ„' : 'å•é¡Œã‚ã‚Š';
                
                results.innerHTML += `
                    <div class="result-card">
                        <h4>âš–ï¸ ã‚¹ã‚±ãƒ¼ãƒ«ä¸€è²«æ€§ãƒ†ã‚¹ãƒˆçµæœ</h4>
                        <p><strong>ä¸€è²«æ€§ã‚¹ã‚³ã‚¢:</strong> ${consistencyScore}%</p>
                        <p><strong>æ¤œå‡ºå•é¡Œæ•°:</strong> ${consistencyIssues.length}ä»¶</p>
                        ${consistencyIssues.length > 0 ? `
                            <p><strong>å•é¡Œè©³ç´°:</strong></p>
                            <ul>${consistencyIssues.map(issue => `<li>${issue}</li>`).join('')}</ul>
                        ` : '<p>âœ… ã‚¹ã‚±ãƒ¼ãƒ«ä¸€è²«æ€§ã«å•é¡Œãªã—</p>'}
                    </div>
                `;
                
                updateMetricStatus('scaleConsistencyStatus', statusText, statusColor);
                
            } catch (error) {
                console.error('ã‚¹ã‚±ãƒ¼ãƒ«ä¸€è²«æ€§ãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼:', error);
                results.innerHTML += `<div class="error-card"><h4>âŒ ã‚¹ã‚±ãƒ¼ãƒ«ä¸€è²«æ€§ãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼</h4><p>${error.message}</p></div>`;
                updateMetricStatus('scaleConsistencyStatus', 'ã‚¨ãƒ©ãƒ¼', '#dc3545');
            }
        }
        
        // äºˆæ¸¬å€¤æ¯”è¼ƒè¡¨ç¤º
        function displayPredictionComparison() {
            const comparison = document.getElementById('predictionComparison');
            
            if (!testResults.basicPredictions || !testResults.ensembleData) {
                return;
            }
            
            const predictions = testResults.basicPredictions;
            const ensembleData = testResults.ensembleData;
            
            let tableHTML = `
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>é¦¬å</th>
                            <th>åŸºæœ¬å‹ç‡</th>
                            <th>ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«ã‚¹ã‚³ã‚¢</th>
                            <th>å¼·åŒ–å¾Œå‹ç‡</th>
                            <th>æ”¹å–„åº¦</th>
                        </tr>
                    </thead>
                    <tbody>
            `;
            
            predictions.forEach((prediction, index) => {
                if (ensembleData.predictions[index]) {
                    const ensemblePred = ensembleData.predictions[index];
                    const basicScore = prediction.winProbability / 1.3; // é€†ç®—ã§åŸºæœ¬ã‚¹ã‚³ã‚¢æ¨å®š
                    const improvement = prediction.winProbability - basicScore;
                    
                    tableHTML += `
                        <tr>
                            <td>${prediction.name}</td>
                            <td>
                                <div class="score-bar">
                                    <div class="score-fill score-basic" style="width: ${Math.min(100, basicScore)}%"></div>
                                </div>
                                ${basicScore.toFixed(1)}%
                            </td>
                            <td>
                                <div class="score-bar">
                                    <div class="score-fill score-ensemble" style="width: ${prediction.enhancedScore}%"></div>
                                </div>
                                ${prediction.enhancedScore.toFixed(1)}%
                            </td>
                            <td>
                                <div class="score-bar">
                                    <div class="score-fill score-enhanced" style="width: ${Math.min(100, prediction.winProbability)}%"></div>
                                </div>
                                ${prediction.winProbability.toFixed(1)}%
                            </td>
                            <td style="color: ${improvement > 0 ? '#28a745' : '#dc3545'}">
                                ${improvement > 0 ? '+' : ''}${improvement.toFixed(1)}%
                            </td>
                        </tr>
                    `;
                }
            });
            
            tableHTML += '</tbody></table>';
            comparison.innerHTML = tableHTML;
        }
        
        // ãƒ¡ãƒˆãƒªã‚¯ã‚¹çŠ¶æ…‹æ›´æ–°
        function updateMetricStatus(elementId, status, color) {
            const element = document.getElementById(elementId);
            element.textContent = status;
            element.style.color = color;
            element.style.fontWeight = 'bold';
        }
        
        // åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ¯ ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«çµ±åˆãƒ†ã‚¹ãƒˆã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–å®Œäº†');
        });
    </script>
</body>
</html>