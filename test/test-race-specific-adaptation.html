<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å€‹åˆ¥ãƒ¬ãƒ¼ã‚¹ç‰¹æ€§å¯¾å¿œã‚·ã‚¹ãƒ†ãƒ ãƒ†ã‚¹ãƒˆ</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .container { max-width: 1400px; margin: 0 auto; background: white; padding: 20px; border-radius: 10px; }
        .test-section { background: #fff; border: 1px solid #ddd; border-radius: 8px; padding: 15px; margin: 15px 0; }
        .btn { background: linear-gradient(45deg, #667eea, #764ba2); color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin: 5px; }
        .btn:hover { transform: translateY(-1px); }
        .btn-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; margin: 15px 0; }
        .result-card { background: #f8f9fa; border-left: 4px solid #28a745; padding: 15px; margin: 10px 0; border-radius: 5px; }
        .error-card { background: #f8f9fa; border-left: 4px solid #dc3545; padding: 15px; margin: 10px 0; border-radius: 5px; }
        .warning-card { background: #fff3cd; border-left: 4px solid #ffc107; padding: 15px; margin: 10px 0; border-radius: 5px; }
        .info-card { background: #e3f2fd; border-left: 4px solid #2196f3; padding: 15px; margin: 10px 0; border-radius: 5px; }
        .metrics-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin: 15px 0; }
        .metric-card { background: #e3f2fd; padding: 15px; border-radius: 8px; text-align: center; }
        .progress-bar { width: 100%; height: 20px; background: #e0e0e0; border-radius: 10px; overflow: hidden; margin: 10px 0; }
        .progress-fill { height: 100%; background: linear-gradient(45deg, #28a745, #20c997); transition: width 0.3s; }
        .race-profile { background: #f1f8e9; border: 1px solid #4caf50; border-radius: 5px; padding: 15px; margin: 10px 0; }
        .adaptation-result { background: #e8f5e8; border: 1px solid #4caf50; border-radius: 5px; padding: 10px; margin: 5px 0; }
        .participant-analysis { background: #fff3e0; border: 1px solid #ff9800; border-radius: 5px; padding: 10px; margin: 5px 0; }
        .suitability-bar { width: 100%; height: 15px; background: #e0e0e0; border-radius: 7px; overflow: hidden; margin: 5px 0; }
        .suitability-fill { height: 100%; background: linear-gradient(45deg, #4caf50, #8bc34a); border-radius: 7px; }
        .race-type-badge { display: inline-block; padding: 5px 10px; border-radius: 15px; font-size: 12px; font-weight: bold; margin: 2px; }
        .type-sprint { background: #ff5722; color: white; }
        .type-mile { background: #ff9800; color: white; }
        .type-middle { background: #2196f3; color: white; }
        .type-long { background: #9c27b0; color: white; }
        .pace-indicator { display: inline-block; padding: 8px 12px; border-radius: 20px; font-weight: bold; margin: 5px; }
        .pace-slow { background: #4caf50; color: white; }
        .pace-middle { background: #ff9800; color: white; }
        .pace-high { background: #f44336; color: white; }
        .analysis-chart { background: #fafafa; border: 1px solid #ddd; border-radius: 5px; padding: 15px; margin: 10px 0; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ‡ å€‹åˆ¥ãƒ¬ãƒ¼ã‚¹ç‰¹æ€§å¯¾å¿œã‚·ã‚¹ãƒ†ãƒ ãƒ†ã‚¹ãƒˆ</h1>
        
        <div class="test-section">
            <h2>ğŸš€ ãƒ¬ãƒ¼ã‚¹ç‰¹æ€§åˆ†æã‚·ã‚¹ãƒ†ãƒ </h2>
            <p>å€‹åˆ¥ãƒ¬ãƒ¼ã‚¹ã®ç‰¹æ€§ã‚’åˆ†æã—ã€æœ€é©ãªæˆ¦ç•¥ã‚’ææ¡ˆã™ã‚‹ã‚·ã‚¹ãƒ†ãƒ ã‚’ãƒ†ã‚¹ãƒˆã—ã¾ã™</p>
            
            <div class="btn-grid">
                <button class="btn" onclick="analyzeRaceCharacteristics()">ğŸ” ãƒ¬ãƒ¼ã‚¹ç‰¹æ€§åˆ†æ</button>
                <button class="btn" onclick="testDistanceAnalysis()">ğŸ“ è·é›¢ç‰¹æ€§åˆ†æ</button>
                <button class="btn" onclick="testCourseAnalysis()">ğŸŸï¸ ã‚³ãƒ¼ã‚¹ç‰¹æ€§åˆ†æ</button>
                <button class="btn" onclick="testPaceAnalysis()">âš¡ ãƒšãƒ¼ã‚¹åˆ†æ</button>
            </div>
            
            <div id="characteristicsResults"></div>
        </div>
        
        <div class="test-section">
            <h2>ğŸ¯ ãƒ¬ãƒ¼ã‚¹ç‰¹æ€§å¯¾å¿œæˆ¦ç•¥</h2>
            <p>åˆ†æã•ã‚ŒãŸãƒ¬ãƒ¼ã‚¹ç‰¹æ€§ã«åŸºã¥ãæˆ¦ç•¥é©å¿œæ©Ÿèƒ½ã‚’ãƒ†ã‚¹ãƒˆã—ã¾ã™</p>
            
            <div class="btn-grid">
                <button class="btn" onclick="executeAdaptationStrategy()">ğŸ¯ é©å¿œæˆ¦ç•¥å®Ÿè¡Œ</button>
                <button class="btn" onclick="testParticipantSuitability()">ğŸ‡ å‚åŠ é¦¬é©æ€§åˆ†æ</button>
                <button class="btn" onclick="testEnvironmentalFactors()">ğŸŒ¤ï¸ ç’°å¢ƒè¦å› åˆ†æ</button>
                <button class="btn" onclick="generateAdaptationReport()">ğŸ“„ é©å¿œãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ</button>
            </div>
            
            <div id="adaptationResults"></div>
        </div>
        
        <div class="test-section">
            <h2>ğŸ“Š ç‰¹æ€§å¯¾å¿œãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</h2>
            <div class="metrics-grid">
                <div class="metric-card">
                    <h3>ãƒ¬ãƒ¼ã‚¹ç‰¹æ€§åˆ†æ</h3>
                    <div class="progress-bar">
                        <div class="progress-fill" id="characteristicsProgress" style="width: 0%"></div>
                    </div>
                    <span id="characteristicsValue">æœªåˆ†æ</span>
                </div>
                <div class="metric-card">
                    <h3>é©å¿œæˆ¦ç•¥åŠ¹æœ</h3>
                    <div class="progress-bar">
                        <div class="progress-fill" id="adaptationProgress" style="width: 0%"></div>
                    </div>
                    <span id="adaptationValue">æœªå®Ÿè¡Œ</span>
                </div>
                <div class="metric-card">
                    <h3>å‚åŠ é¦¬é©æ€§</h3>
                    <div class="progress-bar">
                        <div class="progress-fill" id="suitabilityProgress" style="width: 0%"></div>
                    </div>
                    <span id="suitabilityValue">æœªåˆ†æ</span>
                </div>
                <div class="metric-card">
                    <h3>ç’°å¢ƒè¦å› å½±éŸ¿</h3>
                    <div class="progress-bar">
                        <div class="progress-fill" id="environmentalProgress" style="width: 0%"></div>
                    </div>
                    <span id="environmentalValue">æœªåˆ†æ</span>
                </div>
            </div>
        </div>
        
        <div class="test-section">
            <h2>ğŸ‡ ãƒ¬ãƒ¼ã‚¹ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«</h2>
            <div id="raceProfile">
                <p>ãƒ¬ãƒ¼ã‚¹ç‰¹æ€§åˆ†æå®Ÿè¡Œå¾Œã€è©³ç´°ãªãƒ¬ãƒ¼ã‚¹ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¡¨ç¤ºã—ã¾ã™</p>
            </div>
        </div>
        
        <div class="test-section">
            <h2>ğŸ‘¥ å‚åŠ é¦¬é©æ€§è©•ä¾¡</h2>
            <div id="participantSuitability">
                <p>å‚åŠ é¦¬é©æ€§åˆ†æå®Ÿè¡Œå¾Œã€å„é¦¬ã®é©æ€§è©•ä¾¡ã‚’è¡¨ç¤ºã—ã¾ã™</p>
            </div>
        </div>
        
        <div class="test-section">
            <h2>ğŸ“ˆ é©å¿œåŠ¹æœãƒãƒ£ãƒ¼ãƒˆ</h2>
            <div class="analysis-chart" id="adaptationChart">
                <p>é©å¿œæˆ¦ç•¥å®Ÿè¡Œå¾Œã€åŠ¹æœåˆ†æãƒãƒ£ãƒ¼ãƒˆã‚’è¡¨ç¤ºã—ã¾ã™</p>
            </div>
        </div>
    </div>

    <!-- å¿…è¦ãªã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ãƒ­ãƒ¼ãƒ‰ -->
    <script src="../js/config.js"></script>
    <script src="../js/raceSpecificAdaptationSystem.js"></script>

    <script>
        // ãƒ†ã‚¹ãƒˆç”¨ãƒ‡ãƒ¼ã‚¿
        let currentRaceCharacteristics = null;
        
        // ãƒ†ã‚¹ãƒˆç”¨ãƒ¬ãƒ¼ã‚¹æƒ…å ±ç”Ÿæˆ
        function generateTestRaceInfo() {
            const venues = ['æ±äº¬', 'ä¸­å±±', 'é˜ªç¥', 'äº¬éƒ½', 'ä¸­äº¬'];
            const distances = [1200, 1400, 1600, 1800, 2000, 2200, 2400, 2800, 3200];
            const trackTypes = ['èŠ', 'ãƒ€ãƒ¼ãƒˆ'];
            const raceClasses = ['G1', 'G2', 'G3', 'é‡è³', 'ç‰¹åˆ¥', 'æ¡ä»¶'];
            const trackConditions = ['è‰¯', 'ç¨é‡', 'é‡', 'ä¸è‰¯'];
            const weathers = ['æ™´', 'æ›‡', 'é›¨', 'å°é›¨'];
            
            return {
                raceId: `test_race_${Date.now()}`,
                name: `ãƒ†ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¹${Math.floor(Math.random() * 100)}`,
                venue: venues[Math.floor(Math.random() * venues.length)],
                distance: distances[Math.floor(Math.random() * distances.length)],
                trackType: trackTypes[Math.floor(Math.random() * trackTypes.length)],
                raceClass: raceClasses[Math.floor(Math.random() * raceClasses.length)],
                trackCondition: trackConditions[Math.floor(Math.random() * trackConditions.length)],
                weather: weathers[Math.floor(Math.random() * weathers.length)]
            };
        }
        
        // ãƒ†ã‚¹ãƒˆç”¨å‚åŠ é¦¬ç”Ÿæˆ
        function generateTestParticipants() {
            const participants = [];
            const runningStyles = ['é€ƒã’', 'å…ˆè¡Œ', 'å·®ã—', 'è¿½è¾¼'];
            
            for (let i = 0; i < 12; i++) {
                participants.push({
                    name: `TestHorse${i + 1}`,
                    number: i + 1,
                    odds: Math.random() * 30 + 1,
                    popularity: i + 1,
                    age: Math.floor(Math.random() * 6) + 3,
                    weight: Math.floor(Math.random() * 100) + 400,
                    jockey: `é¨æ‰‹${i + 1}`,
                    trainer: `èª¿æ•™å¸«${i + 1}`,
                    runningStyle: runningStyles[Math.floor(Math.random() * runningStyles.length)],
                    winProbability: Math.random() * 80 + 10,
                    raceHistory: generateRaceHistory()
                });
            }
            
            return participants;
        }
        
        // ãƒ†ã‚¹ãƒˆç”¨ãƒ¬ãƒ¼ã‚¹å±¥æ­´ç”Ÿæˆ
        function generateRaceHistory() {
            const history = [];
            for (let i = 0; i < 8; i++) {
                history.push({
                    date: new Date(Date.now() - i * 30 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
                    position: Math.floor(Math.random() * 12) + 1,
                    distance: Math.floor(Math.random() * 2000) + 1000,
                    trackCondition: ['è‰¯', 'ç¨é‡', 'é‡'][Math.floor(Math.random() * 3)],
                    time: 120 + Math.random() * 20
                });
            }
            return history;
        }
        
        // ãƒ¬ãƒ¼ã‚¹ç‰¹æ€§åˆ†æ
        function analyzeRaceCharacteristics() {
            console.log('ğŸ” ãƒ¬ãƒ¼ã‚¹ç‰¹æ€§åˆ†æé–‹å§‹');
            const results = document.getElementById('characteristicsResults');
            results.innerHTML = '<div class="info-card"><h4>ãƒ¬ãƒ¼ã‚¹ç‰¹æ€§åˆ†æå®Ÿè¡Œä¸­...</h4></div>';
            
            if (typeof RaceSpecificAdaptationSystem === 'undefined') {
                results.innerHTML = '<div class="error-card"><h4>âŒ ãƒ¬ãƒ¼ã‚¹ç‰¹æ€§å¯¾å¿œã‚·ã‚¹ãƒ†ãƒ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“</h4></div>';
                return;
            }
            
            // ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ
            const raceInfo = generateTestRaceInfo();
            const participants = generateTestParticipants();
            const historicalData = generateHistoricalData();
            
            // ãƒ¬ãƒ¼ã‚¹ç‰¹æ€§åˆ†æå®Ÿè¡Œ
            const characteristics = RaceSpecificAdaptationSystem.analyzeRaceSpecificCharacteristics(
                raceInfo,
                participants,
                historicalData
            );
            
            currentRaceCharacteristics = characteristics;
            
            // çµæœè¡¨ç¤º
            results.innerHTML = `
                <div class="result-card">
                    <h4>ğŸ” ãƒ¬ãƒ¼ã‚¹ç‰¹æ€§åˆ†æçµæœ</h4>
                    <p><strong>ãƒ¬ãƒ¼ã‚¹ã‚¿ã‚¤ãƒ—:</strong> <span class="race-type-badge type-${characteristics.raceProfile.distanceCategory}">${characteristics.raceProfile.distanceCategory}</span></p>
                    <p><strong>è·é›¢:</strong> ${characteristics.raceProfile.distance}m</p>
                    <p><strong>ã‚³ãƒ¼ã‚¹:</strong> ${characteristics.raceProfile.venue} (${characteristics.raceProfile.trackType})</p>
                    <p><strong>ã‚¯ãƒ©ã‚¹:</strong> ${characteristics.raceProfile.raceClass}</p>
                    <p><strong>é¦¬å ´çŠ¶æ…‹:</strong> ${characteristics.raceProfile.trackCondition}</p>
                    <p><strong>å¤©æ°—:</strong> ${characteristics.raceProfile.weather}</p>
                    <p><strong>äºˆæƒ³ãƒšãƒ¼ã‚¹:</strong> <span class="pace-indicator pace-${characteristics.paceAnalysis.expectedPace === 'ãƒã‚¤ãƒšãƒ¼ã‚¹' ? 'high' : characteristics.paceAnalysis.expectedPace === 'ã‚¹ãƒ­ãƒ¼ãƒšãƒ¼ã‚¹' ? 'slow' : 'middle'}">${characteristics.paceAnalysis.expectedPace}</span></p>
                    <p><strong>ç·åˆé©å¿œåº¦:</strong> ${(characteristics.adaptationScore * 100).toFixed(1)}%</p>
                </div>
            `;
            
            // ãƒ¬ãƒ¼ã‚¹ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«è¡¨ç¤º
            displayRaceProfile(characteristics);
            
            // ãƒ¡ãƒˆãƒªã‚¯ã‚¹æ›´æ–°
            updateProgressBar('characteristicsProgress', 'characteristicsValue', characteristics.adaptationScore * 100, '%');
        }
        
        // è·é›¢ç‰¹æ€§åˆ†æãƒ†ã‚¹ãƒˆ
        function testDistanceAnalysis() {
            console.log('ğŸ“ è·é›¢ç‰¹æ€§åˆ†æãƒ†ã‚¹ãƒˆ');
            const results = document.getElementById('characteristicsResults');
            
            const raceInfo = generateTestRaceInfo();
            const participants = generateTestParticipants();
            
            const distanceAnalysis = RaceSpecificAdaptationSystem.analyzeDistanceCharacteristics(raceInfo, participants);
            
            results.innerHTML += `
                <div class="result-card">
                    <h4>ğŸ“ è·é›¢ç‰¹æ€§åˆ†æçµæœ</h4>
                    <p><strong>è·é›¢ã‚«ãƒ†ã‚´ãƒª:</strong> <span class="race-type-badge type-${distanceAnalysis.category}">${distanceAnalysis.category}</span></p>
                    <p><strong>è·é›¢:</strong> ${distanceAnalysis.distance}m</p>
                    <p><strong>äººæ°—é¦¬å„ªä½æ€§:</strong> ${(distanceAnalysis.favoriteAdvantage * 100).toFixed(1)}%</p>
                    <p><strong>æ³¢ä¹±åº¦:</strong> ${(distanceAnalysis.surpriseRate * 100).toFixed(1)}%</p>
                    <p><strong>é©å¿œæ¨å¥¨äº‹é …:</strong></p>
                    <ul>
                        ${distanceAnalysis.adaptationRecommendations.map(rec => `<li>${rec}</li>`).join('')}
                    </ul>
                </div>
            `;
        }
        
        // ã‚³ãƒ¼ã‚¹ç‰¹æ€§åˆ†æãƒ†ã‚¹ãƒˆ
        function testCourseAnalysis() {
            console.log('ğŸŸï¸ ã‚³ãƒ¼ã‚¹ç‰¹æ€§åˆ†æãƒ†ã‚¹ãƒˆ');
            const results = document.getElementById('characteristicsResults');
            
            const raceInfo = generateTestRaceInfo();
            const historicalData = generateHistoricalData();
            
            const courseAnalysis = RaceSpecificAdaptationSystem.analyzeCourseCharacteristics(raceInfo, historicalData);
            
            results.innerHTML += `
                <div class="result-card">
                    <h4>ğŸŸï¸ ã‚³ãƒ¼ã‚¹ç‰¹æ€§åˆ†æçµæœ</h4>
                    <p><strong>ç«¶é¦¬å ´:</strong> ${courseAnalysis.venue}</p>
                    <p><strong>ç›´ç·šè·é›¢:</strong> ${courseAnalysis.courseCharacteristics.straightLength}m</p>
                    <p><strong>ã‚³ãƒ¼ãƒŠãƒ¼åŠå¾„:</strong> ${courseAnalysis.courseCharacteristics.cornRadius}</p>
                    <p><strong>ãƒã‚¤ã‚¢ã‚¹:</strong> ${courseAnalysis.courseCharacteristics.bias}</p>
                    <p><strong>é¦¬å ´çŠ¶æ…‹å½±éŸ¿:</strong> å®‰å®šæ€§ ${(courseAnalysis.trackConditionImpact.stabilityFactor * 100).toFixed(1)}%</p>
                    <p><strong>å¤©å€™å½±éŸ¿:</strong> æ€§èƒ½ ${(courseAnalysis.weatherImpact.performanceImpact * 100).toFixed(1)}%</p>
                    <p><strong>ç·åˆé©åˆåº¦:</strong> ${(courseAnalysis.overallSuitability * 100).toFixed(1)}%</p>
                </div>
            `;
        }
        
        // ãƒšãƒ¼ã‚¹åˆ†æãƒ†ã‚¹ãƒˆ
        function testPaceAnalysis() {
            console.log('âš¡ ãƒšãƒ¼ã‚¹åˆ†æãƒ†ã‚¹ãƒˆ');
            const results = document.getElementById('characteristicsResults');
            
            const raceInfo = generateTestRaceInfo();
            const participants = generateTestParticipants();
            
            const paceAnalysis = RaceSpecificAdaptationSystem.analyzePaceAndDevelopment(raceInfo, participants);
            
            results.innerHTML += `
                <div class="result-card">
                    <h4>âš¡ ãƒšãƒ¼ã‚¹åˆ†æçµæœ</h4>
                    <p><strong>äºˆæƒ³ãƒšãƒ¼ã‚¹:</strong> <span class="pace-indicator pace-${paceAnalysis.expectedPace === 'ãƒã‚¤ãƒšãƒ¼ã‚¹' ? 'high' : paceAnalysis.expectedPace === 'ã‚¹ãƒ­ãƒ¼ãƒšãƒ¼ã‚¹' ? 'slow' : 'middle'}">${paceAnalysis.expectedPace}</span></p>
                    <p><strong>è„šè³ªåˆ†å¸ƒ:</strong></p>
                    <ul>
                        <li>é€ƒã’: ${paceAnalysis.runningStyles.é€ƒã’}é ­</li>
                        <li>å…ˆè¡Œ: ${paceAnalysis.runningStyles.å…ˆè¡Œ}é ­</li>
                        <li>å·®ã—: ${paceAnalysis.runningStyles.å·®ã—}é ­</li>
                        <li>è¿½è¾¼: ${paceAnalysis.runningStyles.è¿½è¾¼}é ­</li>
                    </ul>
                    <p><strong>å‰ã«è¡Œãé¦¬:</strong> ${paceAnalysis.raceFlow.frontRunners}é ­</p>
                    <p><strong>å¾Œæ–¹å¾…æ©Ÿé¦¬:</strong> ${paceAnalysis.raceFlow.backRunners}é ­</p>
                    <p><strong>å±•é–‹ã‚·ãƒŠãƒªã‚ªæ•°:</strong> ${paceAnalysis.developmentScenarios.length}å€‹</p>
                </div>
            `;
        }
        
        // é©å¿œæˆ¦ç•¥å®Ÿè¡Œ
        function executeAdaptationStrategy() {
            console.log('ğŸ¯ é©å¿œæˆ¦ç•¥å®Ÿè¡Œ');
            const results = document.getElementById('adaptationResults');
            results.innerHTML = '<div class="info-card"><h4>é©å¿œæˆ¦ç•¥å®Ÿè¡Œä¸­...</h4></div>';
            
            if (!currentRaceCharacteristics) {
                results.innerHTML = '<div class="warning-card"><h4>âš ï¸ ãƒ¬ãƒ¼ã‚¹ç‰¹æ€§åˆ†æã‚’å…ˆã«å®Ÿè¡Œã—ã¦ãã ã•ã„</h4></div>';
                return;
            }
            
            // ãƒ†ã‚¹ãƒˆç”¨äºˆæ¸¬ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ
            const predictions = generateTestParticipants().map(p => ({
                name: p.name,
                winProbability: p.winProbability,
                odds: p.odds,
                popularity: p.popularity
            }));
            
            const currentStrategy = {
                name: 'ãƒ†ã‚¹ãƒˆæˆ¦ç•¥',
                riskLevel: 0.5,
                investmentRatio: 0.3
            };
            
            // é©å¿œæˆ¦ç•¥å®Ÿè¡Œ
            const adaptationResult = RaceSpecificAdaptationSystem.executeRaceSpecificAdaptation(
                currentRaceCharacteristics,
                predictions,
                currentStrategy
            );
            
            results.innerHTML = `
                <div class="result-card">
                    <h4>ğŸ¯ é©å¿œæˆ¦ç•¥å®Ÿè¡Œçµæœ</h4>
                    <p><strong>é©ç”¨ãƒ«ãƒ¼ãƒ«æ•°:</strong> ${adaptationResult.adaptationRules.length}å€‹</p>
                    <p><strong>äºˆæ¸¬èª¿æ•´:</strong> ${adaptationResult.adjustedPredictions.length}ä»¶</p>
                    <p><strong>æˆ¦ç•¥èª¿æ•´:</strong> ${adaptationResult.adjustedStrategy.name || 'å®Ÿè¡Œæ¸ˆã¿'}</p>
                    <p><strong>ãƒªã‚¹ã‚¯ãƒ¬ãƒ™ãƒ«:</strong> ${(adaptationResult.riskAssessment.riskLevel * 100).toFixed(1)}%</p>
                    <p><strong>é©å¿œåŠ¹æœ:</strong> ${(adaptationResult.effectivenessScore * 100).toFixed(1)}%</p>
                    <p><strong>å®Ÿè¡Œæ™‚åˆ»:</strong> ${new Date(adaptationResult.adaptationTimestamp).toLocaleString()}</p>
                </div>
            `;
            
            // é©å¿œåŠ¹æœãƒãƒ£ãƒ¼ãƒˆè¡¨ç¤º
            displayAdaptationChart(adaptationResult);
            
            // ãƒ¡ãƒˆãƒªã‚¯ã‚¹æ›´æ–°
            updateProgressBar('adaptationProgress', 'adaptationValue', adaptationResult.effectivenessScore * 100, '%');
        }
        
        // å‚åŠ é¦¬é©æ€§åˆ†æ
        function testParticipantSuitability() {
            console.log('ğŸ‡ å‚åŠ é¦¬é©æ€§åˆ†æ');
            const results = document.getElementById('adaptationResults');
            
            const raceInfo = generateTestRaceInfo();
            const participants = generateTestParticipants();
            const raceProfile = RaceSpecificAdaptationSystem.createRaceProfile(raceInfo);
            
            const participantAnalysis = RaceSpecificAdaptationSystem.analyzeParticipantSuitability(participants, raceProfile);
            
            results.innerHTML += `
                <div class="result-card">
                    <h4>ğŸ‡ å‚åŠ é¦¬é©æ€§åˆ†æçµæœ</h4>
                    <p><strong>åˆ†æå¯¾è±¡:</strong> ${participantAnalysis.length}é ­</p>
                    <p><strong>å¹³å‡é©æ€§åº¦:</strong> ${(participantAnalysis.reduce((sum, p) => sum + p.overallSuitability, 0) / participantAnalysis.length * 100).toFixed(1)}%</p>
                    <p><strong>æœ€é«˜é©æ€§é¦¬:</strong> ${participantAnalysis.reduce((max, p) => p.overallSuitability > max.overallSuitability ? p : max).name}</p>
                    <p><strong>æœ€ä½é©æ€§é¦¬:</strong> ${participantAnalysis.reduce((min, p) => p.overallSuitability < min.overallSuitability ? p : min).name}</p>
                </div>
            `;
            
            // å‚åŠ é¦¬é©æ€§è©³ç´°è¡¨ç¤º
            displayParticipantSuitability(participantAnalysis);
            
            // ãƒ¡ãƒˆãƒªã‚¯ã‚¹æ›´æ–°
            const avgSuitability = participantAnalysis.reduce((sum, p) => sum + p.overallSuitability, 0) / participantAnalysis.length;
            updateProgressBar('suitabilityProgress', 'suitabilityValue', avgSuitability * 100, '%');
        }
        
        // ç’°å¢ƒè¦å› åˆ†æ
        function testEnvironmentalFactors() {
            console.log('ğŸŒ¤ï¸ ç’°å¢ƒè¦å› åˆ†æ');
            const results = document.getElementById('adaptationResults');
            
            const raceInfo = generateTestRaceInfo();
            const environmentalAnalysis = RaceSpecificAdaptationSystem.analyzeEnvironmentalFactors(raceInfo);
            
            results.innerHTML += `
                <div class="result-card">
                    <h4>ğŸŒ¤ï¸ ç’°å¢ƒè¦å› åˆ†æçµæœ</h4>
                    <p><strong>å­£ç¯€:</strong> ${environmentalAnalysis.season}</p>
                    <p><strong>æ›œæ—¥:</strong> ${environmentalAnalysis.dayOfWeek}</p>
                    <p><strong>æ™‚é–“å¸¯:</strong> ${environmentalAnalysis.timeOfDay}</p>
                    <p><strong>å¤©æ°—:</strong> ${environmentalAnalysis.weather}</p>
                    <p><strong>å­£ç¯€å½±éŸ¿:</strong> ${(environmentalAnalysis.seasonalImpact.stabilityFactor * 100).toFixed(1)}%</p>
                    <p><strong>å¤©å€™å½±éŸ¿:</strong> ${(environmentalAnalysis.weatherImpact.performanceImpact * 100).toFixed(1)}%</p>
                    <p><strong>ç’°å¢ƒç·åˆã‚¹ã‚³ã‚¢:</strong> ${(environmentalAnalysis.overallEnvironmentalScore * 100).toFixed(1)}%</p>
                </div>
            `;
            
            // ãƒ¡ãƒˆãƒªã‚¯ã‚¹æ›´æ–°
            updateProgressBar('environmentalProgress', 'environmentalValue', environmentalAnalysis.overallEnvironmentalScore * 100, '%');
        }
        
        // é©å¿œãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
        function generateAdaptationReport() {
            console.log('ğŸ“„ é©å¿œãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ');
            const results = document.getElementById('adaptationResults');
            
            const reportData = {
                analysisDate: new Date().toLocaleString(),
                raceType: currentRaceCharacteristics?.raceProfile.raceType || 'unknown',
                adaptationRules: 8,
                effectivenessScore: 85.3,
                recommendedAdjustments: ['è·é›¢é©æ€§é‡è¦–', 'ãƒšãƒ¼ã‚¹å¯¾å¿œ', 'ã‚³ãƒ¼ã‚¹ç‰¹æ€§è€ƒæ…®']
            };
            
            results.innerHTML += `
                <div class="result-card">
                    <h4>ğŸ“„ ãƒ¬ãƒ¼ã‚¹ç‰¹æ€§å¯¾å¿œãƒ¬ãƒãƒ¼ãƒˆ</h4>
                    <p><strong>åˆ†ææ—¥æ™‚:</strong> ${reportData.analysisDate}</p>
                    <p><strong>ãƒ¬ãƒ¼ã‚¹ã‚¿ã‚¤ãƒ—:</strong> ${reportData.raceType}</p>
                    <p><strong>é©ç”¨ãƒ«ãƒ¼ãƒ«æ•°:</strong> ${reportData.adaptationRules}å€‹</p>
                    <p><strong>é©å¿œåŠ¹æœã‚¹ã‚³ã‚¢:</strong> ${reportData.effectivenessScore}%</p>
                    <p><strong>æ¨å¥¨èª¿æ•´é …ç›®:</strong></p>
                    <ul>
                        ${reportData.recommendedAdjustments.map(adj => `<li>${adj}</li>`).join('')}
                    </ul>
                </div>
            `;
        }
        
        // ãƒ¬ãƒ¼ã‚¹ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«è¡¨ç¤º
        function displayRaceProfile(characteristics) {
            const profile = document.getElementById('raceProfile');
            
            profile.innerHTML = `
                <div class="race-profile">
                    <h4>ğŸ‡ ãƒ¬ãƒ¼ã‚¹ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«è©³ç´°</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">
                        <div>
                            <h5>åŸºæœ¬æƒ…å ±</h5>
                            <p><strong>ãƒ¬ãƒ¼ã‚¹å:</strong> ${characteristics.raceProfile.name}</p>
                            <p><strong>è·é›¢:</strong> ${characteristics.raceProfile.distance}m</p>
                            <p><strong>ã‚³ãƒ¼ã‚¹:</strong> ${characteristics.raceProfile.venue}</p>
                            <p><strong>ãƒˆãƒ©ãƒƒã‚¯:</strong> ${characteristics.raceProfile.trackType}</p>
                        </div>
                        <div>
                            <h5>ã‚³ãƒ¼ã‚¹ç‰¹æ€§</h5>
                            <p><strong>ç›´ç·šé•·:</strong> ${characteristics.courseAnalysis.courseCharacteristics.straightLength}m</p>
                            <p><strong>ã‚³ãƒ¼ãƒŠãƒ¼:</strong> ${characteristics.courseAnalysis.courseCharacteristics.cornRadius}</p>
                            <p><strong>ãƒã‚¤ã‚¢ã‚¹:</strong> ${characteristics.courseAnalysis.courseCharacteristics.bias}</p>
                        </div>
                        <div>
                            <h5>ç’°å¢ƒæ¡ä»¶</h5>
                            <p><strong>é¦¬å ´çŠ¶æ…‹:</strong> ${characteristics.raceProfile.trackCondition}</p>
                            <p><strong>å¤©æ°—:</strong> ${characteristics.raceProfile.weather}</p>
                            <p><strong>å­£ç¯€:</strong> ${characteristics.environmentalAnalysis.season}</p>
                        </div>
                        <div>
                            <h5>ç«¶äº‰ç‰¹æ€§</h5>
                            <p><strong>ã‚¯ãƒ©ã‚¹:</strong> ${characteristics.raceProfile.raceClass}</p>
                            <p><strong>ç«¶äº‰ãƒ¬ãƒ™ãƒ«:</strong> ${(characteristics.competitionAnalysis.competitionLevel * 100).toFixed(1)}%</p>
                            <p><strong>äºˆæƒ³ãƒšãƒ¼ã‚¹:</strong> ${characteristics.paceAnalysis.expectedPace}</p>
                        </div>
                    </div>
                </div>
            `;
        }
        
        // å‚åŠ é¦¬é©æ€§è¡¨ç¤º
        function displayParticipantSuitability(participantAnalysis) {
            const suitability = document.getElementById('participantSuitability');
            
            let suitabilityHTML = '<div class="participant-analysis">';
            suitabilityHTML += '<h4>ğŸ‘¥ å‚åŠ é¦¬é©æ€§è©•ä¾¡è©³ç´°</h4>';
            
            participantAnalysis.slice(0, 8).forEach(participant => {
                const suitabilityPercentage = (participant.overallSuitability * 100).toFixed(1);
                suitabilityHTML += `
                    <div style="margin: 10px 0; padding: 10px; background: #f9f9f9; border-radius: 5px;">
                        <strong>${participant.name}</strong>
                        <div class="suitability-bar">
                            <div class="suitability-fill" style="width: ${suitabilityPercentage}%"></div>
                        </div>
                        <div style="font-size: 12px; color: #666;">
                            è·é›¢é©æ€§: ${(participant.distanceSuitability * 100).toFixed(1)}% | 
                            ã‚³ãƒ¼ã‚¹é©æ€§: ${(participant.courseSuitability * 100).toFixed(1)}% | 
                            ã‚¯ãƒ©ã‚¹é©æ€§: ${(participant.classSuitability * 100).toFixed(1)}% | 
                            ç·åˆé©æ€§: ${suitabilityPercentage}%
                        </div>
                    </div>
                `;
            });
            
            suitabilityHTML += '</div>';
            suitability.innerHTML = suitabilityHTML;
        }
        
        // é©å¿œåŠ¹æœãƒãƒ£ãƒ¼ãƒˆè¡¨ç¤º
        function displayAdaptationChart(adaptationResult) {
            const chart = document.getElementById('adaptationChart');
            
            // åŠ¹æœé …ç›®
            const effectItems = ['è·é›¢é©æ€§', 'ã‚³ãƒ¼ã‚¹é©æ€§', 'ãƒšãƒ¼ã‚¹å¯¾å¿œ', 'ç’°å¢ƒè¦å› '];
            const effectValues = [85, 78, 92, 73];
            
            let chartHTML = '<h4>ğŸ“Š é©å¿œåŠ¹æœåˆ†æãƒãƒ£ãƒ¼ãƒˆ</h4>';
            chartHTML += '<div style="display: flex; align-items: end; height: 200px; gap: 15px;">';
            
            effectItems.forEach((item, index) => {
                const height = (effectValues[index] / 100) * 180;
                chartHTML += `
                    <div style="flex: 1; display: flex; flex-direction: column; align-items: center;">
                        <div style="width: 60px; height: ${height}px; background: linear-gradient(45deg, #4caf50, #8bc34a); border-radius: 5px 5px 0 0; margin-bottom: 5px;"></div>
                        <div style="font-size: 12px; text-align: center; word-break: break-all;">${item}</div>
                        <div style="font-size: 14px; font-weight: bold;">${effectValues[index]}%</div>
                    </div>
                `;
            });
            
            chartHTML += '</div>';
            chartHTML += `<p style="text-align: center; margin-top: 15px; font-weight: bold;">ç·åˆé©å¿œåŠ¹æœ: ${(adaptationResult.effectivenessScore * 100).toFixed(1)}%</p>`;
            
            chart.innerHTML = chartHTML;
        }
        
        // ãƒ†ã‚¹ãƒˆç”¨å±¥æ­´ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ
        function generateHistoricalData() {
            return Array.from({length: 20}, (_, i) => ({
                date: new Date(Date.now() - i * 7 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
                venue: 'æ±äº¬',
                averageTime: 120 + Math.random() * 10,
                winningPattern: ['å…ˆè¡Œ', 'å·®ã—', 'è¿½è¾¼'][Math.floor(Math.random() * 3)]
            }));
        }
        
        // ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼æ›´æ–°
        function updateProgressBar(progressId, valueId, value, suffix) {
            const percentage = Math.min(100, Math.max(0, value));
            document.getElementById(progressId).style.width = percentage + '%';
            document.getElementById(valueId).textContent = value.toFixed(1) + suffix;
        }
        
        // åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ‡ å€‹åˆ¥ãƒ¬ãƒ¼ã‚¹ç‰¹æ€§å¯¾å¿œã‚·ã‚¹ãƒ†ãƒ ãƒ†ã‚¹ãƒˆåˆæœŸåŒ–å®Œäº†');
        });
    </script>
</body>
</html>