<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‹•çš„ãƒªã‚¹ã‚¯èª¿æ•´ã‚·ã‚¹ãƒ†ãƒ ãƒ†ã‚¹ãƒˆ</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            margin: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.2em;
        }
        .section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 5px solid #4caf50;
        }
        .btn {
            background: linear-gradient(45deg, #4caf50, #2e7d32);
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 8px;
            cursor: pointer;
            margin: 10px;
            font-weight: bold;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(76,175,80,0.4);
        }
        .btn-test { background: linear-gradient(45deg, #e91e63, #c2185b); }
        .btn-scenario { background: linear-gradient(45deg, #ff9800, #f57c00); }
        .btn-reset { background: linear-gradient(45deg, #6c757d, #495057); }
        
        .result {
            background: #e8f5e8;
            border: 1px solid #4caf50;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            white-space: pre-wrap;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            max-height: 500px;
            overflow-y: auto;
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¯ å‹•çš„ãƒªã‚¹ã‚¯èª¿æ•´ã‚·ã‚¹ãƒ†ãƒ ãƒ†ã‚¹ãƒˆ</h1>
        
        <div class="section">
            <h2>ğŸ“‹ ãƒ†ã‚¹ãƒˆæ¦‚è¦</h2>
            <p>Phase 6ã®ã‚±ãƒªãƒ¼åŸºæº–è³‡é‡‘ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã«çµ„ã¿è¾¼ã¾ã‚ŒãŸå‹•çš„ãƒªã‚¹ã‚¯èª¿æ•´æ©Ÿèƒ½ã‚’ãƒ†ã‚¹ãƒˆã—ã¾ã™ã€‚</p>
            <ul>
                <li><strong>å‹•çš„ãƒªã‚¹ã‚¯èª¿æ•´:</strong> éå»ã®æˆç¸¾ã«åŸºã¥ã„ã¦ãƒªã‚¹ã‚¯å€ç‡ã‚’å‹•çš„ã«èª¿æ•´</li>
                <li><strong>ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æ:</strong> å‹ç‡ã€ROIã€ãƒ‰ãƒ­ãƒ¼ãƒ€ã‚¦ãƒ³ã€é€£å‹/é€£æ•—ã‚’è€ƒæ…®</li>
                <li><strong>2æ®µéšãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ª:</strong> ãƒ¡ã‚¤ãƒ³å€™è£œã¨ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«å€™è£œã¸ã®æœ€é©é…åˆ†</li>
                <li><strong>ç«¶åˆè§£æ±º:</strong> åŒãƒ¬ãƒ¼ã‚¹å†…ã§ã®æŠ•è³‡å€™è£œã®ç«¶åˆã‚’è‡ªå‹•è§£æ±º</li>
            </ul>
        </div>

        <!-- ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ -->
        <div class="section">
            <h3 style="color: #4caf50;">ğŸ§ª åŸºæœ¬å‹•çš„ãƒªã‚¹ã‚¯èª¿æ•´ãƒ†ã‚¹ãƒˆ</h3>
            <div class="grid">
                <button class="btn btn-test" onclick="testDynamicRiskAdjustment()">ğŸ”§ å‹•çš„ãƒªã‚¹ã‚¯èª¿æ•´ãƒ†ã‚¹ãƒˆ</button>
                <button class="btn btn-test" onclick="testPortfolioOptimization()">ğŸ“Š ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªæœ€é©åŒ–ãƒ†ã‚¹ãƒˆ</button>
                <button class="btn" onclick="showKellyCapitalStatus()">ğŸ’° è³‡é‡‘ç®¡ç†çŠ¶æ³ç¢ºèª</button>
            </div>
            <div id="basicTestResults"></div>
        </div>

        <!-- ã‚·ãƒŠãƒªã‚ªãƒ†ã‚¹ãƒˆ -->
        <div class="section">
            <h3 style="color: #ff9800;">ğŸ“ˆ ã‚·ãƒŠãƒªã‚ªåˆ¥ãƒ†ã‚¹ãƒˆ</h3>
            <div class="grid">
                <button class="btn btn-scenario" onclick="testWinningStreak()">ğŸ† é€£å‹ã‚·ãƒŠãƒªã‚ª</button>
                <button class="btn btn-scenario" onclick="testLosingStreak()">ğŸ“‰ é€£æ•—ã‚·ãƒŠãƒªã‚ª</button>
                <button class="btn btn-scenario" onclick="testHighVolatility()">âš¡ é«˜ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£</button>
                <button class="btn btn-scenario" onclick="testDrawdownScenario()">ğŸ“Š ãƒ‰ãƒ­ãƒ¼ãƒ€ã‚¦ãƒ³åˆ¶å¾¡</button>
            </div>
            <div id="scenarioTestResults"></div>
        </div>

        <!-- ãƒªã‚»ãƒƒãƒˆ -->
        <div class="section">
            <h3>ğŸ”„ ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ç®¡ç†</h3>
            <div class="grid">
                <button class="btn btn-reset" onclick="resetKellyData()">ğŸ—‘ï¸ ãƒ‡ãƒ¼ã‚¿ãƒªã‚»ãƒƒãƒˆ</button>
                <button class="btn" onclick="showDetailedAnalysis()">ğŸ“‹ è©³ç´°åˆ†æãƒ¬ãƒãƒ¼ãƒˆ</button>
            </div>
            <div id="resetResults"></div>
        </div>
    </div>

    <!-- Kelly Capital Managerèª­ã¿è¾¼ã¿ -->
    <script src="js/kellyCapitalManager.js"></script>

    <script>
        // åŸºæœ¬å‹•çš„ãƒªã‚¹ã‚¯èª¿æ•´ãƒ†ã‚¹ãƒˆ
        function testDynamicRiskAdjustment() {
            const resultDiv = document.getElementById('basicTestResults');
            try {
                console.clear();
                console.log('ğŸ”§ å‹•çš„ãƒªã‚¹ã‚¯èª¿æ•´ã‚·ã‚¹ãƒ†ãƒ ãƒ†ã‚¹ãƒˆé–‹å§‹');
                
                const manager = new KellyCapitalManager();
                
                // å¤šæ§˜ãªãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å±¥æ­´ã‚’è¨­å®š
                manager.performanceHistory = [
                    { date: '2024-01-15', investment: 1500, return: 800, netResult: -700, drawdown: 0.07 },
                    { date: '2024-01-16', investment: 1200, return: 1800, netResult: 600, drawdown: 0.05 },
                    { date: '2024-01-17', investment: 1800, return: 2500, netResult: 700, drawdown: 0.03 },
                    { date: '2024-01-18', investment: 2000, return: 1000, netResult: -1000, drawdown: 0.04 },
                    { date: '2024-01-19', investment: 1700, return: 2200, netResult: 500, drawdown: 0.02 },
                ];
                
                // ç›´è¿‘ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æ
                const recentStats = manager.getRecentPerformance(5);
                console.log('ğŸ“Š ç›´è¿‘ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æ:', recentStats);
                
                // å‹•çš„ãƒªã‚¹ã‚¯èª¿æ•´è¨ˆç®—
                const riskAdjustment = manager.calculateDynamicRiskMultiplier(recentStats);
                console.log('ğŸ¯ å‹•çš„ãƒªã‚¹ã‚¯èª¿æ•´çµæœ:', riskAdjustment);
                
                let result = '=== å‹•çš„ãƒªã‚¹ã‚¯èª¿æ•´ãƒ†ã‚¹ãƒˆçµæœ ===\n';
                result += `ğŸ“Š ç›´è¿‘${recentStats.totalRaces}ãƒ¬ãƒ¼ã‚¹ã®åˆ†æ:\n`;
                result += `  å‹ç‡: ${(recentStats.winRate * 100).toFixed(1)}%\n`;
                result += `  å¹³å‡ROI: ${recentStats.averageROI.toFixed(2)}%\n`;
                result += `  æœ€å¤§ãƒ‰ãƒ­ãƒ¼ãƒ€ã‚¦ãƒ³: ${(recentStats.maxDrawdown * 100).toFixed(2)}%\n`;
                result += `  é€£å‹: ${recentStats.consecutiveWins}å›\n`;
                result += `  é€£æ•—: ${recentStats.consecutiveLosses}å›\n`;
                result += `  ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£: ${recentStats.volatility.toFixed(2)}\n\n`;
                
                result += `ğŸ”§ ãƒªã‚¹ã‚¯èª¿æ•´çµæœ:\n`;
                result += `  èª¿æ•´å€ç‡: ${riskAdjustment.multiplier.toFixed(3)}x\n`;
                result += `  ç”Ÿå€ç‡: ${riskAdjustment.rawMultiplier.toFixed(3)}x\n`;
                result += `  åˆ¶é™é©ç”¨: ${riskAdjustment.isConstrained ? 'ã‚ã‚Š' : 'ãªã—'}\n`;
                result += `  èª¿æ•´ç†ç”±:\n`;
                
                if (riskAdjustment.reasons.length > 0) {
                    riskAdjustment.reasons.forEach(reason => {
                        result += `    â€¢ ${reason}\n`;
                    });
                } else {
                    result += `    â€¢ æ¨™æº–é‹ç”¨\n`;
                }
                
                result += '\nâœ… å‹•çš„ãƒªã‚¹ã‚¯èª¿æ•´ã‚·ã‚¹ãƒ†ãƒ ãŒæ­£å¸¸ã«å‹•ä½œã—ã¦ã„ã¾ã™ï¼';
                
                resultDiv.innerHTML = `<div class="result">${result}</div>`;
                
            } catch (error) {
                resultDiv.innerHTML = `<div class="result">âŒ ã‚¨ãƒ©ãƒ¼: ${error.message}</div>`;
                console.error('å‹•çš„ãƒªã‚¹ã‚¯èª¿æ•´ãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼:', error);
            }
        }

        // é€£å‹ã‚·ãƒŠãƒªã‚ªãƒ†ã‚¹ãƒˆ
        function testWinningStreak() {
            const resultDiv = document.getElementById('scenarioTestResults');
            try {
                const manager = new KellyCapitalManager();
                
                // é€£å‹ã‚·ãƒŠãƒªã‚ªã®ãƒ‡ãƒ¼ã‚¿
                manager.performanceHistory = [
                    { date: '2024-01-20', investment: 2000, return: 2800, netResult: 800, drawdown: 0.00 },
                    { date: '2024-01-21', investment: 2200, return: 3100, netResult: 900, drawdown: 0.00 },
                    { date: '2024-01-22', investment: 2500, return: 3600, netResult: 1100, drawdown: 0.00 },
                    { date: '2024-01-23', investment: 2800, return: 3900, netResult: 1100, drawdown: 0.00 },
                    { date: '2024-01-24', investment: 3000, return: 4200, netResult: 1200, drawdown: 0.00 },
                    { date: '2024-01-25', investment: 3200, return: 4500, netResult: 1300, drawdown: 0.00 }
                ];
                
                const recentStats = manager.getRecentPerformance(6);
                const riskAdjustment = manager.calculateDynamicRiskMultiplier(recentStats);
                
                let result = '=== é€£å‹ã‚·ãƒŠãƒªã‚ªãƒ†ã‚¹ãƒˆçµæœ ===\n';
                result += `ğŸ† ${recentStats.consecutiveWins}é€£å‹ä¸­ï¼\n`;
                result += `ğŸ“ˆ å‹ç‡: ${(recentStats.winRate * 100).toFixed(1)}%\n`;
                result += `ğŸ’° å¹³å‡ROI: ${recentStats.averageROI.toFixed(2)}%\n`;
                result += `ğŸ”§ ãƒªã‚¹ã‚¯å€ç‡: ${riskAdjustment.multiplier.toFixed(3)}x\n`;
                result += `ğŸ“‹ èª¿æ•´ç†ç”±: ${riskAdjustment.reasons.join(', ') || 'æ¨™æº–é‹ç”¨'}\n`;
                result += '\nğŸ’¡ é€£å‹æ™‚ã¯é©åº¦ã«ãƒªã‚¹ã‚¯ã‚’å¢—åŠ ã•ã›ã¾ã™ãŒã€éåº¦ãªå¢—åŠ ã¯é¿ã‘ã¾ã™ã€‚';
                
                resultDiv.innerHTML = `<div class="result">${result}</div>`;
                
            } catch (error) {
                resultDiv.innerHTML = `<div class="result">âŒ ã‚¨ãƒ©ãƒ¼: ${error.message}</div>`;
            }
        }

        // é€£æ•—ã‚·ãƒŠãƒªã‚ªãƒ†ã‚¹ãƒˆ
        function testLosingStreak() {
            const resultDiv = document.getElementById('scenarioTestResults');
            try {
                const manager = new KellyCapitalManager();
                
                // é€£æ•—ã‚·ãƒŠãƒªã‚ªã®ãƒ‡ãƒ¼ã‚¿
                manager.performanceHistory = [
                    { date: '2024-01-20', investment: 2000, return: 400, netResult: -1600, drawdown: 0.16 },
                    { date: '2024-01-21', investment: 1800, return: 300, netResult: -1500, drawdown: 0.18 },
                    { date: '2024-01-22', investment: 1600, return: 200, netResult: -1400, drawdown: 0.20 },
                    { date: '2024-01-23', investment: 1400, return: 100, netResult: -1300, drawdown: 0.22 },
                    { date: '2024-01-24', investment: 1200, return: 0, netResult: -1200, drawdown: 0.24 },
                    { date: '2024-01-25', investment: 1000, return: 0, netResult: -1000, drawdown: 0.26 }
                ];
                
                const recentStats = manager.getRecentPerformance(6);
                const riskAdjustment = manager.calculateDynamicRiskMultiplier(recentStats);
                
                let result = '=== é€£æ•—ã‚·ãƒŠãƒªã‚ªãƒ†ã‚¹ãƒˆçµæœ ===\n';
                result += `ğŸ“‰ ${recentStats.consecutiveLosses}é€£æ•—ä¸­...\n`;
                result += `ğŸ˜° å‹ç‡: ${(recentStats.winRate * 100).toFixed(1)}%\n`;
                result += `ğŸ’¸ å¹³å‡ROI: ${recentStats.averageROI.toFixed(2)}%\n`;
                result += `ğŸ“Š æœ€å¤§ãƒ‰ãƒ­ãƒ¼ãƒ€ã‚¦ãƒ³: ${(recentStats.maxDrawdown * 100).toFixed(2)}%\n`;
                result += `ğŸ›¡ï¸ ãƒªã‚¹ã‚¯å€ç‡: ${riskAdjustment.multiplier.toFixed(3)}x (å¤§å¹…æ¸›é¡)\n`;
                result += `ğŸ“‹ èª¿æ•´ç†ç”±:\n`;
                riskAdjustment.reasons.forEach(reason => {
                    result += `  â€¢ ${reason}\n`;
                });
                result += '\nğŸ’¡ é€£æ•—æ™‚ã¯å¤§å¹…ã«ãƒªã‚¹ã‚¯ã‚’å‰Šæ¸›ã—ã€è³‡é‡‘ã‚’ä¿è­·ã—ã¾ã™ã€‚';
                
                resultDiv.innerHTML = `<div class="result">${result}</div>`;
                
            } catch (error) {
                resultDiv.innerHTML = `<div class="result">âŒ ã‚¨ãƒ©ãƒ¼: ${error.message}</div>`;
            }
        }

        // é«˜ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£ã‚·ãƒŠãƒªã‚ª
        function testHighVolatility() {
            const resultDiv = document.getElementById('scenarioTestResults');
            try {
                const manager = new KellyCapitalManager();
                
                // é«˜ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£ã®ãƒ‡ãƒ¼ã‚¿ï¼ˆå¤§å‹ã¡ã¨å¤§è² ã‘ã‚’ç¹°ã‚Šè¿”ã™ï¼‰
                manager.performanceHistory = [
                    { date: '2024-01-20', investment: 2000, return: 5000, netResult: 3000, drawdown: 0.00 },
                    { date: '2024-01-21', investment: 3000, return: 500, netResult: -2500, drawdown: 0.15 },
                    { date: '2024-01-22', investment: 1500, return: 4500, netResult: 3000, drawdown: 0.05 },
                    { date: '2024-01-23', investment: 2500, return: 0, netResult: -2500, drawdown: 0.12 },
                    { date: '2024-01-24', investment: 2000, return: 6000, netResult: 4000, drawdown: 0.02 }
                ];
                
                const recentStats = manager.getRecentPerformance(5);
                const riskAdjustment = manager.calculateDynamicRiskMultiplier(recentStats);
                
                let result = '=== é«˜ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£ã‚·ãƒŠãƒªã‚ªãƒ†ã‚¹ãƒˆçµæœ ===\n';
                result += `âš¡ ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£: ${recentStats.volatility.toFixed(2)} (é«˜ã„)\n`;
                result += `ğŸ¯ å‹ç‡: ${(recentStats.winRate * 100).toFixed(1)}%\n`;
                result += `ğŸ’° å¹³å‡ROI: ${recentStats.averageROI.toFixed(2)}%\n`;
                result += `ğŸ“Š æœ€å¤§ãƒ‰ãƒ­ãƒ¼ãƒ€ã‚¦ãƒ³: ${(recentStats.maxDrawdown * 100).toFixed(2)}%\n`;
                result += `ğŸ”§ ãƒªã‚¹ã‚¯å€ç‡: ${riskAdjustment.multiplier.toFixed(3)}x\n`;
                result += `ğŸ“‹ èª¿æ•´ç†ç”±:\n`;
                riskAdjustment.reasons.forEach(reason => {
                    result += `  â€¢ ${reason}\n`;
                });
                result += '\nğŸ’¡ é«˜ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£æ™‚ã¯ãƒªã‚¹ã‚¯ã‚’å‰Šæ¸›ã—ã€å®‰å®šæ€§ã‚’é‡è¦–ã—ã¾ã™ã€‚';
                
                resultDiv.innerHTML = `<div class="result">${result}</div>`;
                
            } catch (error) {
                resultDiv.innerHTML = `<div class="result">âŒ ã‚¨ãƒ©ãƒ¼: ${error.message}</div>`;
            }
        }

        // ãƒ‰ãƒ­ãƒ¼ãƒ€ã‚¦ãƒ³åˆ¶å¾¡ã‚·ãƒŠãƒªã‚ª
        function testDrawdownScenario() {
            const resultDiv = document.getElementById('scenarioTestResults');
            try {
                const manager = new KellyCapitalManager();
                
                // é«˜ãƒ‰ãƒ­ãƒ¼ãƒ€ã‚¦ãƒ³ã‚·ãƒŠãƒªã‚ª
                manager.currentCapital = 80000; // åˆæœŸ10ä¸‡ã‹ã‚‰2ä¸‡å††ã®æå¤±
                manager.capitalPeak = 100000;
                
                manager.performanceHistory = [
                    { date: '2024-01-20', investment: 2000, return: 0, netResult: -2000, drawdown: 0.02 },
                    { date: '2024-01-21', investment: 1800, return: 0, netResult: -1800, drawdown: 0.04 },
                    { date: '2024-01-22', investment: 1600, return: 0, netResult: -1600, drawdown: 0.06 },
                    { date: '2024-01-23', investment: 1400, return: 0, netResult: -1400, drawdown: 0.08 },
                    { date: '2024-01-24', investment: 1200, return: 0, netResult: -1200, drawdown: 0.10 },
                    { date: '2024-01-25', investment: 1000, return: 100, netResult: -900, drawdown: 0.11 },
                    { date: '2024-01-26', investment: 1000, return: 0, netResult: -1000, drawdown: 0.12 },
                    { date: '2024-01-27', investment: 800, return: 0, netResult: -800, drawdown: 0.13 },
                    { date: '2024-01-28', investment: 800, return: 0, netResult: -800, drawdown: 0.14 },
                    { date: '2024-01-29', investment: 600, return: 0, netResult: -600, drawdown: 0.15 }
                ];
                
                const currentDrawdown = manager.getCurrentDrawdown();
                const recentStats = manager.getRecentPerformance(10);
                const riskAdjustment = manager.calculateDynamicRiskMultiplier(recentStats);
                
                let result = '=== ãƒ‰ãƒ­ãƒ¼ãƒ€ã‚¦ãƒ³åˆ¶å¾¡ã‚·ãƒŠãƒªã‚ªãƒ†ã‚¹ãƒˆçµæœ ===\n';
                result += `ğŸ“‰ ç¾åœ¨ãƒ‰ãƒ­ãƒ¼ãƒ€ã‚¦ãƒ³: ${(currentDrawdown * 100).toFixed(2)}%\n`;
                result += `ğŸš¨ ãƒ‰ãƒ­ãƒ¼ãƒ€ã‚¦ãƒ³åˆ¶å¾¡: ${currentDrawdown > manager.drawdownLimit * 0.8 ? 'ğŸ”´ ç™ºå‹•ä¸­' : 'ğŸŸ¢ æ­£å¸¸'}\n`;
                result += `ğŸ’° ç¾åœ¨è³‡é‡‘: ${manager.currentCapital.toLocaleString()}å††\n`;
                result += `ğŸ”ï¸ æœ€é«˜è³‡é‡‘: ${manager.capitalPeak.toLocaleString()}å††\n`;
                result += `ğŸ›¡ï¸ ãƒªã‚¹ã‚¯å€ç‡: ${riskAdjustment.multiplier.toFixed(3)}x (å¤§å¹…ä¿è­·)\n`;
                result += `ğŸ“‹ èª¿æ•´ç†ç”±:\n`;
                riskAdjustment.reasons.forEach(reason => {
                    result += `  â€¢ ${reason}\n`;
                });
                result += '\nğŸ’¡ é«˜ãƒ‰ãƒ­ãƒ¼ãƒ€ã‚¦ãƒ³æ™‚ã¯æœ€å¤§é™ã«ãƒªã‚¹ã‚¯ã‚’å‰Šæ¸›ã—ã€è³‡é‡‘ã‚’ä¿è­·ã—ã¾ã™ã€‚';
                
                resultDiv.innerHTML = `<div class="result">${result}</div>`;
                
            } catch (error) {
                resultDiv.innerHTML = `<div class="result">âŒ ã‚¨ãƒ©ãƒ¼: ${error.message}</div>`;
            }
        }

        // è³‡é‡‘ç®¡ç†çŠ¶æ³ç¢ºèª
        function showKellyCapitalStatus() {
            const resultDiv = document.getElementById('basicTestResults');
            try {
                const report = checkKellyCapital();
                
                let result = '=== Kellyè³‡é‡‘ç®¡ç†çŠ¶æ³ ===\n';
                result += `ğŸ’° ç¾åœ¨è³‡é‡‘: ${report.capitalStatus.currentCapital.toLocaleString()}å††\n`;
                result += `ğŸ“ˆ ç·åç›Šç‡: ${report.capitalStatus.totalReturnRate.toFixed(2)}%\n`;
                result += `ğŸ¯ ãƒªã‚¹ã‚¯ãƒ¬ãƒ™ãƒ«: ${report.riskManagement.riskLevel}\n`;
                result += `ğŸ“Š æœ€å¤§æŠ•è³‡æ¯”ç‡: ${(report.riskManagement.maxBetRatio * 100)}%\n`;
                result += `ğŸ“‰ ç¾åœ¨ãƒ‰ãƒ­ãƒ¼ãƒ€ã‚¦ãƒ³: ${(report.capitalStatus.currentDrawdown * 100).toFixed(2)}%\n`;
                result += `ğŸ”¢ ç›´è¿‘ãƒ¬ãƒ¼ã‚¹æ•°: ${report.recentPerformance.totalRaces}\n`;
                
                resultDiv.innerHTML = `<div class="result">${result}</div>`;
                
            } catch (error) {
                resultDiv.innerHTML = `<div class="result">âŒ ã‚¨ãƒ©ãƒ¼: ${error.message}</div>`;
            }
        }

        // ãƒ‡ãƒ¼ã‚¿ãƒªã‚»ãƒƒãƒˆ
        function resetKellyData() {
            const resultDiv = document.getElementById('resetResults');
            try {
                const manager = new KellyCapitalManager();
                manager.resetCapitalData();
                
                resultDiv.innerHTML = '<div class="result">âœ… Kellyè³‡é‡‘ç®¡ç†ãƒ‡ãƒ¼ã‚¿ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã—ãŸ</div>';
                
            } catch (error) {
                resultDiv.innerHTML = `<div class="result">âŒ ã‚¨ãƒ©ãƒ¼: ${error.message}</div>`;
            }
        }

        // è©³ç´°åˆ†æãƒ¬ãƒãƒ¼ãƒˆ
        function showDetailedAnalysis() {
            const resultDiv = document.getElementById('resetResults');
            try {
                showPhase6PerformanceStats();
                resultDiv.innerHTML = '<div class="result">âœ… è©³ç´°åˆ†æãƒ¬ãƒãƒ¼ãƒˆã‚’è¡¨ç¤ºã—ã¾ã—ãŸï¼ˆã‚¢ãƒ©ãƒ¼ãƒˆã¨ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚’ç¢ºèªï¼‰</div>';
                
            } catch (error) {
                resultDiv.innerHTML = `<div class="result">âŒ ã‚¨ãƒ©ãƒ¼: ${error.message}</div>`;
            }
        }

        // ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰æ™‚ã®åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ¯ å‹•çš„ãƒªã‚¹ã‚¯èª¿æ•´ã‚·ã‚¹ãƒ†ãƒ ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸ãŒèª­ã¿è¾¼ã¾ã‚Œã¾ã—ãŸ');
        });
    </script>
</body>
</html>