<!DOCTYPE html>
<html>
<head>
    <title>æœ€çµ‚è¡€çµ±ä¿®æ­£ãƒ†ã‚¹ãƒˆ</title>
    <meta charset="UTF-8">
</head>
<body>
    <h1>æœ€çµ‚è¡€çµ±ä¿®æ­£ãƒ†ã‚¹ãƒˆ - ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä¿®æ­£ç‰ˆ</h1>
    
    <div id="testResult"></div>
    
    <script src="js/dataConverter.js"></script>
    <script>
        console.log('=== æœ€çµ‚è¡€çµ±ä¿®æ­£ãƒ†ã‚¹ãƒˆé–‹å§‹ ===');
        
        // ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿
        const testData = `1\t1\t
æ¶ˆ
ãƒ­ãƒ¼ãƒ‰ã‚«ãƒŠãƒ­ã‚¢
ãƒ™ãƒ©ã‚¸ã‚ªã‚ªãƒšãƒ©
ã‚¨ã‚¢ãƒ«ãƒ¼ãƒ†ã‚£ãƒ¼ãƒ³
(ãƒãƒ¼ãƒ“ãƒ³ã‚¸ãƒ£ãƒ¼)
æ —æ±ãƒ»ä¸Šæ‘  
å…ˆä¸­9é€±
510kg(+2)
4.0 (1äººæ°—)
ç‰¡5é¹¿

æ¨ªå±±å’Œ
58.0\t
1\t2\t
æ¶ˆ
ãƒ‰ã‚¥ãƒ©ãƒ¡ãƒ³ãƒ†
ãƒ‰ã‚¥ãƒ¬ãƒƒãƒ„ã‚¡
ãƒ¢ã‚¢ã‚¶ãƒ³ã‚»ã‚¤ã‚¯ãƒªãƒƒãƒ‰
(More Than Ready)
ç¾æµ¦ãƒ»å°¾é–¢  
å…ˆä¸­9é€±
468kg(å‰è¨ˆä¸)
6.7 (4äººæ°—)
ç‰¡5é’é¹¿

æ¨ªå±±æ­¦
58.0\t`;

        try {
            console.log('ğŸ§ª ä¿®æ­£ç‰ˆãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’è§£æä¸­...');
            
            const result = DataConverter.parseNetkeibaData(testData);
            
            console.log('âœ… è§£æçµæœ:', result);
            console.log(`ğŸ“Š è§£æã•ã‚ŒãŸé¦¬ã®æ•°: ${result.horses.length}`);
            
            let results = [];
            
            result.horses.forEach((horse, index) => {
                console.log(`=== é¦¬ ${index + 1}: ${horse.name} ===`);
                console.log(`ğŸ çˆ¶ç³»: ${horse.sire || 'æœªæŠ½å‡º'}`);
                console.log(`ğŸ æ¯ç³»: ${horse.dam || 'æœªæŠ½å‡º'}`);
                console.log(`ğŸ æ¯çˆ¶: ${horse.damSire || 'æœªæŠ½å‡º'}`);
                
                results.push({
                    name: horse.name,
                    sire: horse.sire,
                    dam: horse.dam,
                    damSire: horse.damSire
                });
                console.log('---');
            });
            
            // æœŸå¾…çµæœãƒã‚§ãƒƒã‚¯
            const expectedResults = [
                { name: 'ãƒ™ãƒ©ã‚¸ã‚ªã‚ªãƒšãƒ©', sire: 'ãƒ­ãƒ¼ãƒ‰ã‚«ãƒŠãƒ­ã‚¢', dam: 'ã‚¨ã‚¢ãƒ«ãƒ¼ãƒ†ã‚£ãƒ¼ãƒ³', damSire: 'ãƒãƒ¼ãƒ“ãƒ³ã‚¸ãƒ£ãƒ¼' },
                { name: 'ãƒ‰ã‚¥ãƒ¬ãƒƒãƒ„ã‚¡', sire: 'ãƒ‰ã‚¥ãƒ©ãƒ¡ãƒ³ãƒ†', dam: 'ãƒ¢ã‚¢ã‚¶ãƒ³ã‚»ã‚¤ã‚¯ãƒªãƒƒãƒ‰', damSire: 'More Than Ready' }
            ];
            
            let successCount = 0;
            let errorMessages = [];
            
            expectedResults.forEach((expected, index) => {
                const actual = results[index];
                if (!actual) {
                    errorMessages.push(`âŒ é¦¬${index + 1}ã®ãƒ‡ãƒ¼ã‚¿ãŒå­˜åœ¨ã—ãªã„`);
                    return;
                }
                
                if (actual.sire === expected.sire) {
                    successCount++;
                    console.log(`âœ… é¦¬${index + 1}ã®çˆ¶ç³»æŠ½å‡ºæˆåŠŸ: ${actual.sire}`);
                } else {
                    errorMessages.push(`âŒ é¦¬${index + 1}ã®çˆ¶ç³»æŠ½å‡ºå¤±æ•—: æœŸå¾…å€¤=${expected.sire}, å®Ÿéš›=${actual.sire}`);
                }
                
                if (actual.dam === expected.dam) {
                    successCount++;
                    console.log(`âœ… é¦¬${index + 1}ã®æ¯ç³»æŠ½å‡ºæˆåŠŸ: ${actual.dam}`);
                } else {
                    errorMessages.push(`âŒ é¦¬${index + 1}ã®æ¯ç³»æŠ½å‡ºå¤±æ•—: æœŸå¾…å€¤=${expected.dam}, å®Ÿéš›=${actual.dam}`);
                }
                
                if (actual.damSire === expected.damSire) {
                    successCount++;
                    console.log(`âœ… é¦¬${index + 1}ã®æ¯çˆ¶æŠ½å‡ºæˆåŠŸ: ${actual.damSire}`);
                } else {
                    errorMessages.push(`âŒ é¦¬${index + 1}ã®æ¯çˆ¶æŠ½å‡ºå¤±æ•—: æœŸå¾…å€¤=${expected.damSire}, å®Ÿéš›=${actual.damSire}`);
                }
                
                if (actual.name === expected.name) {
                    successCount++;
                    console.log(`âœ… é¦¬${index + 1}ã®é¦¬åæŠ½å‡ºæˆåŠŸ: ${actual.name}`);
                } else {
                    errorMessages.push(`âŒ é¦¬${index + 1}ã®é¦¬åæŠ½å‡ºå¤±æ•—: æœŸå¾…å€¤=${expected.name}, å®Ÿéš›=${actual.name}`);
                }
            });
            
            const testResultDiv = document.getElementById('testResult');
            const totalTests = expectedResults.length * 4; // å„é¦¬ã«ã¤ã4é …ç›®ï¼ˆé¦¬åã€çˆ¶ç³»ã€æ¯ç³»ã€æ¯çˆ¶ï¼‰
            
            testResultDiv.innerHTML = `
                <h2>ãƒ†ã‚¹ãƒˆçµæœ</h2>
                <div style="padding: 10px; margin: 10px 0; background-color: ${errorMessages.length === 0 ? '#d4edda' : '#f8d7da'}; border: 1px solid ${errorMessages.length === 0 ? '#c3e6cb' : '#f5c6cb'}; border-radius: 5px;">
                    <strong>æˆåŠŸç‡: ${successCount}/${totalTests} (${Math.round(successCount/totalTests*100)}%)</strong>
                </div>
                
                <div style="color: red;">
                    ${errorMessages.map(msg => `<p>${msg}</p>`).join('')}
                </div>
                
                <h3>æŠ½å‡ºçµæœè©³ç´°</h3>
                <table border="1" style="border-collapse: collapse; width: 100%;">
                    <tr>
                        <th>é¦¬å</th>
                        <th>çˆ¶ç³»</th>
                        <th>æ¯ç³»</th>
                        <th>æ¯çˆ¶</th>
                    </tr>
                    ${results.map(horse => `
                        <tr>
                            <td>${horse.name || 'æœªæŠ½å‡º'}</td>
                            <td>${horse.sire || 'æœªæŠ½å‡º'}</td>
                            <td>${horse.dam || 'æœªæŠ½å‡º'}</td>
                            <td>${horse.damSire || 'æœªæŠ½å‡º'}</td>
                        </tr>
                    `).join('')}
                </table>
                
                <h3>ç”Ÿãƒ‡ãƒ¼ã‚¿</h3>
                <pre style="background-color: #f8f9fa; padding: 10px; border-radius: 5px; overflow-x: auto;">${JSON.stringify(result, null, 2)}</pre>
            `;
            
            // æœ€çµ‚åˆ¤å®š
            if (errorMessages.length === 0) {
                console.log('ğŸ‰ ä¿®æ­£å®Œå…¨æˆåŠŸï¼ã™ã¹ã¦ã®è¡€çµ±ãƒ‡ãƒ¼ã‚¿ãŒæ­£å¸¸ã«æŠ½å‡ºã•ã‚Œã¾ã—ãŸ');
            } else {
                console.log('âš ï¸ ã¾ã å•é¡ŒãŒã‚ã‚Šã¾ã™:', errorMessages);
            }
            
        } catch (error) {
            console.error('âŒ ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã‚¨ãƒ©ãƒ¼:', error);
            document.getElementById('testResult').innerHTML = `<p style="color: red;">ã‚¨ãƒ©ãƒ¼: ${error.message}</p>`;
        }
    </script>
</body>
</html>