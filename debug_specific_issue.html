<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>å…·ä½“çš„å•é¡Œãƒ‡ãƒãƒƒã‚°</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ccc; border-radius: 5px; }
        .result { background: #f0f0f0; padding: 10px; margin: 10px 0; border-radius: 3px; }
        .success { color: green; }
        .error { color: red; }
        .warning { color: orange; }
        .log { 
            background: #f8f9fa; 
            padding: 10px; 
            border-radius: 3px; 
            font-family: monospace; 
            font-size: 11px; 
            white-space: pre-wrap; 
            max-height: 400px; 
            overflow-y: auto; 
            border: 1px solid #ddd;
        }
    </style>
</head>
<body>
    <h1>ğŸ” å…·ä½“çš„å•é¡Œãƒ‡ãƒãƒƒã‚°</h1>
    <p>æä¾›ã•ã‚ŒãŸå•é¡Œã®ã‚ã‚‹ãƒ‡ãƒ¼ã‚¿ã§è©³ç´°åˆ†æ</p>
    
    <div class="test-section">
        <h2>ãƒ†ã‚¹ãƒˆ1: ã‚µãƒˆãƒã‚¢ãƒ©ã‚¸ãƒ³ï¼ˆæ¯ç³»æœªæŠ½å‡ºå•é¡Œï¼‰</h2>
        <button onclick="testCase1()">å®Ÿè¡Œ</button>
        <div id="result1" class="result"></div>
    </div>
    
    <div class="test-section">
        <h2>ãƒ†ã‚¹ãƒˆ2: ãƒ€ãƒãƒ³ã‚­ãƒ©ã‚¦ã‚§ã‚¢ï¼ˆé¦¬åèª¤èªå•é¡Œï¼‰</h2>
        <button onclick="testCase2()">å®Ÿè¡Œ</button>
        <div id="result2" class="result"></div>
    </div>
    
    <div class="test-section">
        <h2>ãƒ†ã‚¹ãƒˆ3: ä¸¡æ–¹ã®ãƒ‡ãƒ¼ã‚¿ã‚’çµ±åˆãƒ†ã‚¹ãƒˆ</h2>
        <button onclick="testBothCases()">å®Ÿè¡Œ</button>
        <div id="result3" class="result"></div>
    </div>

    <script src="js/dataConverter.js"></script>
    <script>
        function testCase1() {
            const resultsDiv = document.getElementById('result1');
            
            // å•é¡Œã®ã‚ã‚‹ãƒ‡ãƒ¼ã‚¿1: ã‚µãƒˆãƒã‚¢ãƒ©ã‚¸ãƒ³
            const testData1 = `1\t1\t
--
ã‚µãƒˆãƒã‚¢ãƒ©ã‚¸ãƒ³
ãƒ“ãƒƒãƒ—ã‚¸ãƒ¼ãƒ‹ãƒ¼
ãƒ ãƒ¼ãƒ³ãƒ©ã‚¤ãƒˆãƒ€ãƒ³ã‚¹
(Sinndar)
æ —æ±ãƒ»æ¾ä¸‹  
å·®ä¸­2é€±
486kg(0)
25.3 (7äººæ°—)
ç‰¡5æ —

é¨æ‰‹å
58.0\t`;

            console.log('=== ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹1: ã‚µãƒˆãƒã‚¢ãƒ©ã‚¸ãƒ³ ===');
            console.log('å…¥åŠ›ãƒ‡ãƒ¼ã‚¿:', testData1);
            
            try {
                const result = DataConverter.parseNetkeibaData(testData1);
                console.log('æŠ½å‡ºçµæœ:', result);
                
                let html = '<h4>ğŸ“Š ã‚µãƒˆãƒã‚¢ãƒ©ã‚¸ãƒ³æŠ½å‡ºçµæœ</h4>';
                html += `<p><strong>è§£æã•ã‚ŒãŸé¦¬æ•°:</strong> ${result.horses.length}é ­</p>`;
                
                if (result.horses.length > 0) {
                    const horse = result.horses[0];
                    html += `
                        <div style="border: 1px solid #ddd; padding: 10px; margin: 10px 0;">
                            <h5>æŠ½å‡ºçµæœ</h5>
                            <p><strong>é¦¬å:</strong> ${horse.name || 'âŒæœªæŠ½å‡º'}</p>
                            <p><strong>çˆ¶ç³»:</strong> ${horse.sire || 'âŒæœªæŠ½å‡º'}</p>
                            <p><strong>æ¯ç³»:</strong> ${horse.dam || 'âŒæœªæŠ½å‡º'}</p>
                            <p><strong>æ¯çˆ¶:</strong> ${horse.damSire || 'âŒæœªæŠ½å‡º'}</p>
                        </div>
                        
                        <h5>æœŸå¾…çµæœ</h5>
                        <div style="border: 1px solid #28a745; padding: 10px; margin: 10px 0; background: #d4edda;">
                            <p><strong>é¦¬å:</strong> ãƒ“ãƒƒãƒ—ã‚¸ãƒ¼ãƒ‹ãƒ¼</p>
                            <p><strong>çˆ¶ç³»:</strong> ã‚µãƒˆãƒã‚¢ãƒ©ã‚¸ãƒ³</p>
                            <p><strong>æ¯ç³»:</strong> ãƒ ãƒ¼ãƒ³ãƒ©ã‚¤ãƒˆãƒ€ãƒ³ã‚¹</p>
                            <p><strong>æ¯çˆ¶:</strong> Sinndar</p>
                        </div>
                        
                        <h5>åˆ¤å®šçµæœ</h5>
                        <ul>
                            <li class="${horse.name === 'ãƒ“ãƒƒãƒ—ã‚¸ãƒ¼ãƒ‹ãƒ¼' ? 'success' : 'error'}">
                                é¦¬å: ${horse.name === 'ãƒ“ãƒƒãƒ—ã‚¸ãƒ¼ãƒ‹ãƒ¼' ? 'âœ…æ­£ç¢º' : 'âŒä¸æ­£ç¢º (æœŸå¾…: ãƒ“ãƒƒãƒ—ã‚¸ãƒ¼ãƒ‹ãƒ¼, å®Ÿéš›: ' + (horse.name || 'æœªæŠ½å‡º') + ')'}
                            </li>
                            <li class="${horse.sire === 'ã‚µãƒˆãƒã‚¢ãƒ©ã‚¸ãƒ³' ? 'success' : 'error'}">
                                çˆ¶ç³»: ${horse.sire === 'ã‚µãƒˆãƒã‚¢ãƒ©ã‚¸ãƒ³' ? 'âœ…æ­£ç¢º' : 'âŒä¸æ­£ç¢º (æœŸå¾…: ã‚µãƒˆãƒã‚¢ãƒ©ã‚¸ãƒ³, å®Ÿéš›: ' + (horse.sire || 'æœªæŠ½å‡º') + ')'}
                            </li>
                            <li class="${horse.dam === 'ãƒ ãƒ¼ãƒ³ãƒ©ã‚¤ãƒˆãƒ€ãƒ³ã‚¹' ? 'success' : 'error'}">
                                æ¯ç³»: ${horse.dam === 'ãƒ ãƒ¼ãƒ³ãƒ©ã‚¤ãƒˆãƒ€ãƒ³ã‚¹' ? 'âœ…æ­£ç¢º' : 'âŒä¸æ­£ç¢º (æœŸå¾…: ãƒ ãƒ¼ãƒ³ãƒ©ã‚¤ãƒˆãƒ€ãƒ³ã‚¹, å®Ÿéš›: ' + (horse.dam || 'æœªæŠ½å‡º') + ')'}
                            </li>
                            <li class="${horse.damSire === 'Sinndar' ? 'success' : 'error'}">
                                æ¯çˆ¶: ${horse.damSire === 'Sinndar' ? 'âœ…æ­£ç¢º' : 'âŒä¸æ­£ç¢º (æœŸå¾…: Sinndar, å®Ÿéš›: ' + (horse.damSire || 'æœªæŠ½å‡º') + ')'}
                            </li>
                        </ul>
                    `;
                    
                    if (horse.processLog) {
                        html += '<h5>è©³ç´°ãƒ­ã‚°</h5>';
                        html += `<div class="log">${horse.processLog.join('\\n')}</div>`;
                    }
                } else {
                    html += '<p class="error">âŒ é¦¬ãƒ‡ãƒ¼ã‚¿ãŒæŠ½å‡ºã•ã‚Œã¾ã›ã‚“ã§ã—ãŸ</p>';
                }
                
                resultsDiv.innerHTML = html;
                
            } catch (error) {
                resultsDiv.innerHTML = `<div class="error">âŒ ã‚¨ãƒ©ãƒ¼: ${error.message}</div>`;
                console.error('ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹1ã‚¨ãƒ©ãƒ¼:', error);
            }
        }
        
        function testCase2() {
            const resultsDiv = document.getElementById('result2');
            
            // å•é¡Œã®ã‚ã‚‹ãƒ‡ãƒ¼ã‚¿2: ãƒ€ãƒãƒ³ã‚­ãƒ©ã‚¦ã‚§ã‚¢
            const testData2 = `5\t8\t
--
ãƒ­ãƒ¼ãƒ‰ã‚«ãƒŠãƒ­ã‚¢
ãƒ€ãƒãƒ³ã‚­ãƒ©ã‚¦ã‚§ã‚¢
ãƒ¬ã‚­ã‚·ãƒ¼ãƒ«ãƒ¼
(Sligo Bay)
æ —æ±ãƒ»ä¸­å†…ç”°  
å…ˆä¸­46é€±
474kg(+16)
20.1 (6äººæ°—)
ç‰4é»’é¹¿

é¨æ‰‹å
55.0\t`;

            console.log('=== ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹2: ãƒ€ãƒãƒ³ã‚­ãƒ©ã‚¦ã‚§ã‚¢ ===');
            console.log('å…¥åŠ›ãƒ‡ãƒ¼ã‚¿:', testData2);
            
            try {
                const result = DataConverter.parseNetkeibaData(testData2);
                console.log('æŠ½å‡ºçµæœ:', result);
                
                let html = '<h4>ğŸ“Š ãƒ€ãƒãƒ³ã‚­ãƒ©ã‚¦ã‚§ã‚¢æŠ½å‡ºçµæœ</h4>';
                html += `<p><strong>è§£æã•ã‚ŒãŸé¦¬æ•°:</strong> ${result.horses.length}é ­</p>`;
                
                if (result.horses.length > 0) {
                    const horse = result.horses[0];
                    html += `
                        <div style="border: 1px solid #ddd; padding: 10px; margin: 10px 0;">
                            <h5>æŠ½å‡ºçµæœ</h5>
                            <p><strong>é¦¬å:</strong> ${horse.name || 'âŒæœªæŠ½å‡º'}</p>
                            <p><strong>çˆ¶ç³»:</strong> ${horse.sire || 'âŒæœªæŠ½å‡º'}</p>
                            <p><strong>æ¯ç³»:</strong> ${horse.dam || 'âŒæœªæŠ½å‡º'}</p>
                            <p><strong>æ¯çˆ¶:</strong> ${horse.damSire || 'âŒæœªæŠ½å‡º'}</p>
                        </div>
                        
                        <h5>æœŸå¾…çµæœ</h5>
                        <div style="border: 1px solid #28a745; padding: 10px; margin: 10px 0; background: #d4edda;">
                            <p><strong>é¦¬å:</strong> ãƒ€ãƒãƒ³ã‚­ãƒ©ã‚¦ã‚§ã‚¢</p>
                            <p><strong>çˆ¶ç³»:</strong> ãƒ­ãƒ¼ãƒ‰ã‚«ãƒŠãƒ­ã‚¢</p>
                            <p><strong>æ¯ç³»:</strong> ãƒ¬ã‚­ã‚·ãƒ¼ãƒ«ãƒ¼</p>
                            <p><strong>æ¯çˆ¶:</strong> Sligo Bay</p>
                        </div>
                        
                        <h5>åˆ¤å®šçµæœ</h5>
                        <ul>
                            <li class="${horse.name === 'ãƒ€ãƒãƒ³ã‚­ãƒ©ã‚¦ã‚§ã‚¢' ? 'success' : 'error'}">
                                é¦¬å: ${horse.name === 'ãƒ€ãƒãƒ³ã‚­ãƒ©ã‚¦ã‚§ã‚¢' ? 'âœ…æ­£ç¢º' : 'âŒä¸æ­£ç¢º (æœŸå¾…: ãƒ€ãƒãƒ³ã‚­ãƒ©ã‚¦ã‚§ã‚¢, å®Ÿéš›: ' + (horse.name || 'æœªæŠ½å‡º') + ')'}
                            </li>
                            <li class="${horse.sire === 'ãƒ­ãƒ¼ãƒ‰ã‚«ãƒŠãƒ­ã‚¢' ? 'success' : 'error'}">
                                çˆ¶ç³»: ${horse.sire === 'ãƒ­ãƒ¼ãƒ‰ã‚«ãƒŠãƒ­ã‚¢' ? 'âœ…æ­£ç¢º' : 'âŒä¸æ­£ç¢º (æœŸå¾…: ãƒ­ãƒ¼ãƒ‰ã‚«ãƒŠãƒ­ã‚¢, å®Ÿéš›: ' + (horse.sire || 'æœªæŠ½å‡º') + ')'}
                            </li>
                            <li class="${horse.dam === 'ãƒ¬ã‚­ã‚·ãƒ¼ãƒ«ãƒ¼' ? 'success' : 'error'}">
                                æ¯ç³»: ${horse.dam === 'ãƒ¬ã‚­ã‚·ãƒ¼ãƒ«ãƒ¼' ? 'âœ…æ­£ç¢º' : 'âŒä¸æ­£ç¢º (æœŸå¾…: ãƒ¬ã‚­ã‚·ãƒ¼ãƒ«ãƒ¼, å®Ÿéš›: ' + (horse.dam || 'æœªæŠ½å‡º') + ')'}
                            </li>
                            <li class="${horse.damSire === 'Sligo Bay' ? 'success' : 'error'}">
                                æ¯çˆ¶: ${horse.damSire === 'Sligo Bay' ? 'âœ…æ­£ç¢º' : 'âŒä¸æ­£ç¢º (æœŸå¾…: Sligo Bay, å®Ÿéš›: ' + (horse.damSire || 'æœªæŠ½å‡º') + ')'}
                            </li>
                        </ul>
                    `;
                    
                    if (horse.processLog) {
                        html += '<h5>è©³ç´°ãƒ­ã‚°</h5>';
                        html += `<div class="log">${horse.processLog.join('\\n')}</div>`;
                    }
                } else {
                    html += '<p class="error">âŒ é¦¬ãƒ‡ãƒ¼ã‚¿ãŒæŠ½å‡ºã•ã‚Œã¾ã›ã‚“ã§ã—ãŸ</p>';
                }
                
                resultsDiv.innerHTML = html;
                
            } catch (error) {
                resultsDiv.innerHTML = `<div class="error">âŒ ã‚¨ãƒ©ãƒ¼: ${error.message}</div>`;
                console.error('ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹2ã‚¨ãƒ©ãƒ¼:', error);
            }
        }
        
        function testBothCases() {
            const resultsDiv = document.getElementById('result3');
            
            // ä¸¡æ–¹ã®ãƒ‡ãƒ¼ã‚¿ã‚’çµ±åˆ
            const combinedData = `1\t1\t
--
ã‚µãƒˆãƒã‚¢ãƒ©ã‚¸ãƒ³
ãƒ“ãƒƒãƒ—ã‚¸ãƒ¼ãƒ‹ãƒ¼
ãƒ ãƒ¼ãƒ³ãƒ©ã‚¤ãƒˆãƒ€ãƒ³ã‚¹
(Sinndar)
æ —æ±ãƒ»æ¾ä¸‹  
å·®ä¸­2é€±
486kg(0)
25.3 (7äººæ°—)
ç‰¡5æ —

é¨æ‰‹å
58.0\t
5\t8\t
--
ãƒ­ãƒ¼ãƒ‰ã‚«ãƒŠãƒ­ã‚¢
ãƒ€ãƒãƒ³ã‚­ãƒ©ã‚¦ã‚§ã‚¢
ãƒ¬ã‚­ã‚·ãƒ¼ãƒ«ãƒ¼
(Sligo Bay)
æ —æ±ãƒ»ä¸­å†…ç”°  
å…ˆä¸­46é€±
474kg(+16)
20.1 (6äººæ°—)
ç‰4é»’é¹¿

é¨æ‰‹å
55.0\t`;

            console.log('=== çµ±åˆãƒ†ã‚¹ãƒˆ: ä¸¡æ–¹ã®ã‚±ãƒ¼ã‚¹ ===');
            console.log('å…¥åŠ›ãƒ‡ãƒ¼ã‚¿:', combinedData);
            
            try {
                const result = DataConverter.parseNetkeibaData(combinedData);
                console.log('çµ±åˆæŠ½å‡ºçµæœ:', result);
                
                let html = '<h4>ğŸ“Š çµ±åˆãƒ†ã‚¹ãƒˆæŠ½å‡ºçµæœ</h4>';
                html += `<p><strong>è§£æã•ã‚ŒãŸé¦¬æ•°:</strong> ${result.horses.length}é ­</p>`;
                
                const expectedResults = [
                    { name: 'ãƒ“ãƒƒãƒ—ã‚¸ãƒ¼ãƒ‹ãƒ¼', sire: 'ã‚µãƒˆãƒã‚¢ãƒ©ã‚¸ãƒ³', dam: 'ãƒ ãƒ¼ãƒ³ãƒ©ã‚¤ãƒˆãƒ€ãƒ³ã‚¹', damSire: 'Sinndar' },
                    { name: 'ãƒ€ãƒãƒ³ã‚­ãƒ©ã‚¦ã‚§ã‚¢', sire: 'ãƒ­ãƒ¼ãƒ‰ã‚«ãƒŠãƒ­ã‚¢', dam: 'ãƒ¬ã‚­ã‚·ãƒ¼ãƒ«ãƒ¼', damSire: 'Sligo Bay' }
                ];
                
                result.horses.forEach((horse, index) => {
                    const expected = expectedResults[index];
                    if (expected) {
                        html += `
                            <div style="border: 1px solid #ddd; padding: 10px; margin: 10px 0;">
                                <h5>é¦¬${index + 1}</h5>
                                <p><strong>é¦¬å:</strong> ${horse.name || 'âŒæœªæŠ½å‡º'} ${horse.name === expected.name ? 'âœ…' : 'âŒ'}</p>
                                <p><strong>çˆ¶ç³»:</strong> ${horse.sire || 'âŒæœªæŠ½å‡º'} ${horse.sire === expected.sire ? 'âœ…' : 'âŒ'}</p>
                                <p><strong>æ¯ç³»:</strong> ${horse.dam || 'âŒæœªæŠ½å‡º'} ${horse.dam === expected.dam ? 'âœ…' : 'âŒ'}</p>
                                <p><strong>æ¯çˆ¶:</strong> ${horse.damSire || 'âŒæœªæŠ½å‡º'} ${horse.damSire === expected.damSire ? 'âœ…' : 'âŒ'}</p>
                            </div>
                        `;
                    }
                });
                
                resultsDiv.innerHTML = html;
                
            } catch (error) {
                resultsDiv.innerHTML = `<div class="error">âŒ ã‚¨ãƒ©ãƒ¼: ${error.message}</div>`;
                console.error('çµ±åˆãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼:', error);
            }
        }
    </script>
</body>
</html>