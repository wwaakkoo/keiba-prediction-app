# 📖 Kelly基準投資システム ユーザーガイド

## 🎯 システム概要

このシステムはKelly基準を用いて競馬投資の最適な投資額を計算し、実際の投資結果を記録・分析することで、継続的に投資精度を向上させる自己学習型システムです。

---

## 🚀 基本的な使い方

### 1. Kelly推奨の取得
1. レース情報と候補データを入力
2. 「Kelly基準計算」ボタンをクリック
3. 期待値がプラスの候補に対して推奨投資額が表示される

### 2. 投資結果の記録
1. Kelly推奨が表示されると、自動で「投資結果入力UI」が表示
2. 実際の投資額と配当額を入力
3. 「結果を記録」ボタンで保存・分析実行

### 3. 分析結果の確認
- アクショナブルインサイト：改善提案を自動生成
- パフォーマンスチャート：ROI推移を視覚化
- 候補評価システム：候補別の詳細分析

---

## ❓ よくある質問（FAQ）

### 💰 Kelly推奨とROIはどう計算されますか？

**Kelly基準の計算式：**
```
Kelly比率 = (期待値 × オッズ - 1) / (オッズ - 1)
推奨投資額 = 資金 × Kelly比率 × リスク倍率
```

**ROI計算：**
```
ROI = (配当額 - 投資額) / 投資額 × 100
```

**期待値の算出：**
- 過去の成績データ、オッズ、人気度などから機械学習で算出
- 実績データが蓄積されるほど精度が向上

### 💾 記録した結果はどこに保存されていますか？

**保存場所：**
- ブラウザのLocalStorage（端末のローカル領域）
- データは端末固有で、他の端末からはアクセス不可

**安全性：**
- 自動バックアップ機能（最新5世代を保持）
- 意図しない削除防止の確認ダイアログ
- データ復元機能完備

**注意事項：**
- ブラウザのキャッシュクリアで削除される可能性
- 定期的なエクスポートを推奨

### 🗑️ データが消えたように見えるのはなぜですか？

**よくある原因：**

1. **履歴上限による自動削除**
   - レース履歴：1000件まで
   - 古いデータから自動削除
   
2. **ブラウザキャッシュのクリア**
   - 手動でのキャッシュクリア
   - ブラウザの自動クリーンアップ
   
3. **異なるブラウザでのアクセス**
   - データはブラウザ固有
   - Chrome → Safari では引き継がれない

**対処法：**
- 「投資履歴」→「復元」からバックアップを確認
- エクスポート機能で定期バックアップ
- 複数ブラウザ使用時は都度エクスポート/インポート

### 📁 JSON/CSVはどのタイミングで使うと便利？

**JSON形式：**
- **用途**：他システムへのデータ移行、完全バックアップ
- **タイミング**：月末、ブラウザ変更時、重要なマイルストーン

**CSV形式：**
- **用途**：Excel分析、グラフ作成、印刷レポート
- **タイミング**：詳細分析時、税務申告用の整理

**エクスポート手順：**
1. 投資履歴画面で「📁 エクスポート」クリック
2. データタイプと形式を選択
3. 「エクスポート」でダウンロード開始

### 🌐 ブラウザを変えるとデータは持ち越せますか？

**答え：直接は不可能ですが、エクスポート/インポートで対応可能**

**手順：**
1. **旧ブラウザ**：投資履歴 → エクスポート → JSON選択
2. **新ブラウザ**：（現在は手動インポート未実装のため、データ移行時は要相談）

**将来対応予定：**
- インポート機能の実装
- クラウド同期機能の検討

---

## ⚡ パフォーマンス・制限事項

### 💾 データ容量制限

| 項目 | 上限 | 超過時の動作 |
|------|------|-------------|
| レース履歴 | 1000件 | 古い順に自動削除 |
| 候補履歴 | 2000件 | 古い順に自動削除 |
| バックアップ | 5世代 | 古い順に自動削除 |

### 🌍 ブラウザ別の注意事項

| ブラウザ | 注意点 |
|----------|--------|
| **Chrome** | 推奨ブラウザ、全機能で最適化済み |
| **Edge** | Chrome同等の動作、CSVダウンロード対応 |
| **Firefox** | 正常動作、一部UI表示に微差あり |
| **Safari** | ⚠️ LocalStorage制限あり、定期エクスポート推奨 |
| **iOS Safari** | ⚠️ プライベートモードでデータ消失リスク |

### 📱 モバイル対応

- **レスポンシブデザイン**：画面サイズ自動調整
- **タッチ操作**：ボタンサイズ最適化済み
- **数値入力**：数値キーパッド自動表示

---

## 🔧 トラブルシューティング

### ❌ よくあるエラーと対処法

| エラーメッセージ | 原因 | 対処法 |
|-----------------|------|--------|
| 「投資額が数値ではありません」 | 全角数字、文字入力 | 半角数字で再入力 |
| 「データ保存容量が不足」 | LocalStorage満杯 | 古いデータを削除 |
| 「Kelly推奨データが見つかりません」 | 計算未完了 | Kelly計算を先に実行 |
| 「記録処理中です」 | 重複実行 | 処理完了まで待機 |

### 🔄 データ復旧手順

1. **軽微な問題**：ページリロード（F5）
2. **データ不整合**：投資履歴 → 「復元」で最新バックアップ選択
3. **完全消失**：エクスポートファイルからの復元
4. **それでも解決しない**：ブラウザキャッシュクリア後、再度データ入力

---

## 📈 効果的な活用法

### 🎯 推奨運用フロー

1. **毎レース**：Kelly推奨に基づく投資
2. **レース後**：結果入力と即座分析
3. **週次**：アクショナブルインサイトで戦略調整
4. **月次**：パフォーマンスチャートで長期トレンド確認
5. **四半期**：データエクスポートでバックアップ作成

### 💡 上達のコツ

- **小額から開始**：最初は最小投資額でシステムを理解
- **継続記録**：短期的な損失に惑わされず長期的な視点で記録
- **分析重視**：勝った理由・負けた理由をインサイトで確認
- **戦略調整**：月単位でリスク倍率や投資基準を見直し

---

## 🆘 サポート

### 📞 お問い合わせ

技術的な問題やご質問は以下まで：
- GitHub Issues: [リポジトリURL]
- Discord: [コミュニティURL]

### 📝 改善要望

新機能のご提案や改善要望をお待ちしております：
- 機能リクエスト用フォーム
- ユーザーフィードバック

---

**⚡ このシステムで、データドリブンな競馬投資を実現しましょう！**