<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ” åç›Šæ€§ã‚°ãƒ©ãƒ•ãƒ‡ãƒãƒƒã‚°ãƒ†ã‚¹ãƒˆ</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .container { max-width: 1200px; margin: 0 auto; background: white; padding: 20px; border-radius: 10px; }
        .test-section { background: #f8f9fa; padding: 15px; margin: 15px 0; border-radius: 8px; border-left: 4px solid #dc3545; }
        .success { color: #28a745; font-weight: bold; }
        .error { color: #dc3545; font-weight: bold; }
        .warning { color: #ffc107; font-weight: bold; }
        .code-block { background: #f8f9fa; padding: 10px; margin: 10px 0; border-radius: 5px; font-family: monospace; font-size: 12px; border: 1px solid #dee2e6; }
        button { padding: 10px 15px; margin: 5px; border: none; border-radius: 5px; cursor: pointer; background: #007bff; color: white; }
        .btn-danger { background: #dc3545; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” åç›Šæ€§ã‚°ãƒ©ãƒ•ãƒ‡ãƒãƒƒã‚°ãƒ†ã‚¹ãƒˆ</h1>
        
        <div class="test-section">
            <h2>âŒ ç¢ºèªã•ã‚ŒãŸå•é¡Œ</h2>
            <ul>
                <li class="error">ãƒªã‚¹ã‚¯ãƒªã‚¿ãƒ¼ãƒ³ãƒãƒ£ãƒ¼ãƒˆ: ä½•ã‚‚è¡¨ç¤ºã•ã‚Œãªã„</li>
                <li class="error">æŠ•è³‡åŠ¹ç‡ã‚°ãƒ©ãƒ•: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‹ã‚‰å¤‰ã‚ã‚‰ãªã„</li>
            </ul>
        </div>
        
        <div class="test-section">
            <h2>ğŸ”§ ãƒ‡ãƒãƒƒã‚°ãƒ†ã‚¹ãƒˆ</h2>
            
            <h3>1. ProfitabilityVisualizationSystem å­˜åœ¨ç¢ºèª</h3>
            <button onclick="testSystemExistence()">ã‚·ã‚¹ãƒ†ãƒ å­˜åœ¨ç¢ºèª</button>
            <div id="system-test-result"></div>
            
            <h3>2. ãƒ‡ãƒ¼ã‚¿å–å¾—é–¢æ•°ç¢ºèª</h3>
            <button onclick="testDataFunctions()">ãƒ‡ãƒ¼ã‚¿é–¢æ•°ç¢ºèª</button>
            <div id="data-test-result"></div>
            
            <h3>3. Chart.js åˆ©ç”¨å¯èƒ½æ€§ç¢ºèª</h3>
            <button onclick="testChartJS()">Chart.jsç¢ºèª</button>
            <div id="chartjs-test-result"></div>
            
            <h3>4. HTMLè¦ç´ ç¢ºèª</h3>
            <button onclick="testHTMLElements()">HTMLè¦ç´ ç¢ºèª</button>
            <div id="html-test-result"></div>
            
            <h3>5. é–¢æ•°å®Ÿè¡Œãƒ†ã‚¹ãƒˆ</h3>
            <button onclick="testFunctionExecution()">é–¢æ•°å®Ÿè¡Œãƒ†ã‚¹ãƒˆ</button>
            <div id="function-test-result"></div>
        </div>
        
        <div class="test-section">
            <h2>ğŸš€ æ‰‹å‹•ãƒ†ã‚¹ãƒˆ</h2>
            <button onclick="manualTestRiskReturn()">ãƒªã‚¹ã‚¯ãƒªã‚¿ãƒ¼ãƒ³ãƒãƒ£ãƒ¼ãƒˆæ‰‹å‹•ä½œæˆ</button>
            <button onclick="manualTestEfficiency()">æŠ•è³‡åŠ¹ç‡ãƒãƒ£ãƒ¼ãƒˆæ‰‹å‹•ä½œæˆ</button>
            <div id="manual-test-result"></div>
        </div>
        
        <div class="test-section">
            <h2>ğŸ“Š å•é¡Œåˆ†æçµæœ</h2>
            <div id="analysis-result">
                <div class="code-block">
                    åˆ†æå®Ÿè¡Œä¸­...
                </div>
            </div>
        </div>
    </div>

    <script>
        // 1. ã‚·ã‚¹ãƒ†ãƒ å­˜åœ¨ç¢ºèª
        function testSystemExistence() {
            const result = document.getElementById('system-test-result');
            let output = '<h4>ã‚·ã‚¹ãƒ†ãƒ å­˜åœ¨ç¢ºèªçµæœ</h4>';
            
            const tests = [
                { name: 'ProfitabilityVisualizationSystem', check: () => typeof ProfitabilityVisualizationSystem !== 'undefined' },
                { name: 'showProfitabilityDashboard', check: () => typeof showProfitabilityDashboard !== 'undefined' },
                { name: 'Chart', check: () => typeof Chart !== 'undefined' },
                { name: 'RiskReturnAnalyzer', check: () => typeof RiskReturnAnalyzer !== 'undefined' },
                { name: 'InvestmentEfficiencyCalculator', check: () => typeof InvestmentEfficiencyCalculator !== 'undefined' }
            ];
            
            tests.forEach(test => {
                const exists = test.check();
                const statusClass = exists ? 'success' : 'error';
                const statusIcon = exists ? 'âœ…' : 'âŒ';
                output += `<div class="${statusClass}">${statusIcon} ${test.name}: ${exists ? 'å­˜åœ¨' : 'æœªå®šç¾©'}</div>`;
            });
            
            result.innerHTML = output;
        }
        
        // 2. ãƒ‡ãƒ¼ã‚¿å–å¾—é–¢æ•°ç¢ºèª
        function testDataFunctions() {
            const result = document.getElementById('data-test-result');
            let output = '<h4>ãƒ‡ãƒ¼ã‚¿é–¢æ•°ç¢ºèªçµæœ</h4>';
            
            try {
                if (typeof ProfitabilityVisualizationSystem !== 'undefined') {
                    const methods = [
                        'getRiskReturnData',
                        'getInvestmentEfficiencyData',
                        'getProfitabilityChartData',
                        'createRiskReturnScatterChart',
                        'createEfficiencyScatterChart'
                    ];
                    
                    methods.forEach(method => {
                        const exists = typeof ProfitabilityVisualizationSystem[method] === 'function';
                        const statusClass = exists ? 'success' : 'error';
                        const statusIcon = exists ? 'âœ…' : 'âŒ';
                        output += `<div class="${statusClass}">${statusIcon} ${method}: ${exists ? 'å®šç¾©æ¸ˆã¿' : 'æœªå®šç¾©'}</div>`;
                    });
                } else {
                    output += '<div class="error">âŒ ProfitabilityVisualizationSystemãŒæœªå®šç¾©</div>';
                }
            } catch (error) {
                output += `<div class="error">âŒ ã‚¨ãƒ©ãƒ¼: ${error.message}</div>`;
            }
            
            result.innerHTML = output;
        }
        
        // 3. Chart.jsç¢ºèª
        function testChartJS() {
            const result = document.getElementById('chartjs-test-result');
            let output = '<h4>Chart.jsç¢ºèªçµæœ</h4>';
            
            if (typeof Chart !== 'undefined') {
                output += '<div class="success">âœ… Chart.jsåˆ©ç”¨å¯èƒ½</div>';
                output += `<div class="success">âœ… ãƒãƒ¼ã‚¸ãƒ§ãƒ³: ${Chart.version || 'ä¸æ˜'}</div>`;
            } else {
                output += '<div class="error">âŒ Chart.jsæœªèª­ã¿è¾¼ã¿</div>';
            }
            
            result.innerHTML = output;
        }
        
        // 4. HTMLè¦ç´ ç¢ºèª
        function testHTMLElements() {
            const result = document.getElementById('html-test-result');
            let output = '<h4>HTMLè¦ç´ ç¢ºèªçµæœ</h4>';
            
            const elements = [
                'profitabilityDashboard',
                'riskReturnChart',
                'efficiencyChart',
                'learningGraphsSection'
            ];
            
            elements.forEach(id => {
                const element = document.getElementById(id);
                const exists = element !== null;
                const statusClass = exists ? 'success' : 'error';
                const statusIcon = exists ? 'âœ…' : 'âŒ';
                output += `<div class="${statusClass}">${statusIcon} ${id}: ${exists ? 'å­˜åœ¨' : 'æœªç™ºè¦‹'}</div>`;
            });
            
            result.innerHTML = output;
        }
        
        // 5. é–¢æ•°å®Ÿè¡Œãƒ†ã‚¹ãƒˆ
        function testFunctionExecution() {
            const result = document.getElementById('function-test-result');
            let output = '<h4>é–¢æ•°å®Ÿè¡Œãƒ†ã‚¹ãƒˆçµæœ</h4>';
            
            try {
                if (typeof ProfitabilityVisualizationSystem !== 'undefined') {
                    // åˆæœŸåŒ–ãƒ†ã‚¹ãƒˆ
                    output += '<div class="warning">âš ï¸ åˆæœŸåŒ–ãƒ†ã‚¹ãƒˆå®Ÿè¡Œä¸­...</div>';
                    
                    // ãƒ‡ãƒ¼ã‚¿å–å¾—ãƒ†ã‚¹ãƒˆ
                    const testMethods = [
                        'createProfitabilityDashboard',
                        'refreshAllCharts'
                    ];
                    
                    testMethods.forEach(method => {
                        try {
                            if (typeof ProfitabilityVisualizationSystem[method] === 'function') {
                                output += `<div class="success">âœ… ${method}: é–¢æ•°ã¨ã—ã¦å®Ÿè¡Œå¯èƒ½</div>`;
                            } else {
                                output += `<div class="error">âŒ ${method}: é–¢æ•°ã¨ã—ã¦å®šç¾©ã•ã‚Œã¦ã„ãªã„</div>`;
                            }
                        } catch (error) {
                            output += `<div class="error">âŒ ${method}: ${error.message}</div>`;
                        }
                    });
                } else {
                    output += '<div class="error">âŒ ã‚·ã‚¹ãƒ†ãƒ æœªå®šç¾©ã®ãŸã‚å®Ÿè¡Œä¸å¯</div>';
                }
            } catch (error) {
                output += `<div class="error">âŒ ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã‚¨ãƒ©ãƒ¼: ${error.message}</div>`;
            }
            
            result.innerHTML = output;
        }
        
        // æ‰‹å‹•ãƒ†ã‚¹ãƒˆ: ãƒªã‚¹ã‚¯ãƒªã‚¿ãƒ¼ãƒ³
        function manualTestRiskReturn() {
            const result = document.getElementById('manual-test-result');
            let output = '<h4>ãƒªã‚¹ã‚¯ãƒªã‚¿ãƒ¼ãƒ³ãƒãƒ£ãƒ¼ãƒˆæ‰‹å‹•ä½œæˆãƒ†ã‚¹ãƒˆ</h4>';
            
            try {
                // ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã§ãƒ†ã‚¹ãƒˆ
                const mockData = {
                    datasets: [{
                        label: 'ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿',
                        data: [
                            { x: 0.1, y: 5 },
                            { x: 0.3, y: 15 },
                            { x: 0.5, y: 25 }
                        ],
                        backgroundColor: 'rgba(255, 99, 132, 0.6)'
                    }]
                };
                
                output += '<div class="success">âœ… ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ä½œæˆæˆåŠŸ</div>';
                output += `<div class="success">âœ… ãƒ‡ãƒ¼ã‚¿ãƒã‚¤ãƒ³ãƒˆæ•°: ${mockData.datasets[0].data.length}</div>`;
            } catch (error) {
                output += `<div class="error">âŒ ãƒ†ã‚¹ãƒˆå¤±æ•—: ${error.message}</div>`;
            }
            
            result.innerHTML = output;
        }
        
        // æ‰‹å‹•ãƒ†ã‚¹ãƒˆ: æŠ•è³‡åŠ¹ç‡
        function manualTestEfficiency() {
            const result = document.getElementById('manual-test-result');
            let output = '<h4>æŠ•è³‡åŠ¹ç‡ãƒãƒ£ãƒ¼ãƒˆæ‰‹å‹•ä½œæˆãƒ†ã‚¹ãƒˆ</h4>';
            
            try {
                // InvestmentEfficiencyCalculatorä½¿ç”¨ãƒ†ã‚¹ãƒˆ
                if (typeof InvestmentEfficiencyCalculator !== 'undefined') {
                    const testData = {
                        odds: 5.0,
                        winProbability: 0.2,
                        betAmount: 1000,
                        confidence: 0.7
                    };
                    
                    const result = InvestmentEfficiencyCalculator.calculateSingleBetEfficiency(testData);
                    output += '<div class="success">âœ… æŠ•è³‡åŠ¹ç‡è¨ˆç®—æˆåŠŸ</div>';
                    output += `<div class="success">âœ… åŠ¹ç‡ã‚¹ã‚³ã‚¢: ${result.efficiencyScore}</div>`;
                } else {
                    output += '<div class="error">âŒ InvestmentEfficiencyCalculatoræœªå®šç¾©</div>';
                }
            } catch (error) {
                output += `<div class="error">âŒ ãƒ†ã‚¹ãƒˆå¤±æ•—: ${error.message}</div>`;
            }
            
            document.getElementById('manual-test-result').innerHTML = output;
        }
        
        // åˆæœŸåˆ†æå®Ÿè¡Œ
        window.onload = function() {
            setTimeout(() => {
                const analysisResult = document.getElementById('analysis-result');
                
                let analysis = '<h4>å•é¡Œåˆ†æçµæœ</h4>';
                analysis += '<div class="code-block">';
                analysis += 'æƒ³å®šã•ã‚Œã‚‹å•é¡Œ:<br>';
                analysis += '1. ãƒ‡ãƒ¼ã‚¿å–å¾—é–¢æ•°ï¼ˆgetRiskReturnData, getInvestmentEfficiencyDataï¼‰ãŒæœªå®Ÿè£…<br>';
                analysis += '2. å®Ÿéš›ã®ãƒ¬ãƒ¼ã‚¹ãƒ‡ãƒ¼ã‚¿ãŒã‚°ãƒ©ãƒ•ã‚·ã‚¹ãƒ†ãƒ ã«é€£æºã•ã‚Œã¦ã„ãªã„<br>';
                analysis += '3. Chart.jsã®åˆæœŸåŒ–ã‚¿ã‚¤ãƒŸãƒ³ã‚°å•é¡Œ<br>';
                analysis += '4. HTMLè¦ç´ ã®å‹•çš„ç”ŸæˆãŒä¸å®Œå…¨<br>';
                analysis += '</div>';
                
                analysisResult.innerHTML = analysis;
            }, 1000);
        };
    </script>
</body>
</html>