<!DOCTYPE html>
<html>
<head>
    <title>è¡€çµ±æŠ½å‡ºã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ†ã‚¹ãƒˆ</title>
    <meta charset="UTF-8">
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 20px; 
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-section { 
            margin: 20px 0; 
            padding: 15px; 
            border: 1px solid #ddd; 
            border-radius: 5px; 
            background-color: #fff;
        }
        .input-section {
            background-color: #f8f9fa;
            border-color: #dee2e6;
        }
        .success { 
            background-color: #d4edda; 
            border-color: #c3e6cb; 
        }
        .error { 
            background-color: #f8d7da; 
            border-color: #f5c6cb; 
        }
        .warning {
            background-color: #fff3cd;
            border-color: #ffeaa7;
        }
        .log { 
            background-color: #f8f9fa; 
            padding: 10px; 
            border-radius: 3px; 
            font-family: 'Courier New', monospace; 
            font-size: 12px; 
            white-space: pre-wrap; 
            max-height: 400px; 
            overflow-y: auto; 
            border: 1px solid #e9ecef;
        }
        table { 
            border-collapse: collapse; 
            width: 100%; 
            margin: 10px 0; 
        }
        th, td { 
            border: 1px solid #ddd; 
            padding: 8px; 
            text-align: left; 
        }
        th { 
            background-color: #f2f2f2; 
            font-weight: bold;
        }
        .test-data { 
            background-color: #e9ecef; 
            padding: 10px; 
            border-radius: 3px; 
            margin: 10px 0; 
        }
        textarea {
            width: 100%;
            height: 200px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            resize: vertical;
        }
        button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
            font-size: 14px;
        }
        button:hover {
            background-color: #0056b3;
        }
        button.secondary {
            background-color: #6c757d;
        }
        button.secondary:hover {
            background-color: #545b62;
        }
        .sample-buttons {
            margin: 10px 0;
        }
        .expected-results {
            margin: 10px 0;
        }
        .expected-input {
            width: 100%;
            padding: 8px;
            margin: 5px 0;
            border: 1px solid #ddd;
            border-radius: 3px;
        }
        .horse-row {
            display: flex;
            gap: 10px;
            margin: 5px 0;
            align-items: center;
        }
        .horse-row input {
            flex: 1;
        }
        .horse-row button {
            padding: 5px 10px;
            font-size: 12px;
        }
        h1, h2, h3 {
            color: #333;
        }
        .stats {
            display: flex;
            justify-content: space-around;
            text-align: center;
            margin: 15px 0;
        }
        .stat-item {
            flex: 1;
            padding: 10px;
        }
        .stat-number {
            font-size: 24px;
            font-weight: bold;
            color: #007bff;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ è¡€çµ±æŠ½å‡ºã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ†ã‚¹ãƒˆ</h1>
        
        <div class="test-section input-section">
            <h2>ğŸ“ ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿å…¥åŠ›</h2>
            
            <div class="sample-buttons">
                <h4>ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿:</h4>
                <button onclick="loadSample1()">ã‚µãƒ³ãƒ—ãƒ«1: åŸºæœ¬ãƒ‡ãƒ¼ã‚¿</button>
                <button onclick="loadSample2()">ã‚µãƒ³ãƒ—ãƒ«2: è¤‡é›‘ãƒ‡ãƒ¼ã‚¿</button>
                <button onclick="loadSample3()">ã‚µãƒ³ãƒ—ãƒ«3: å•é¡Œãƒ‡ãƒ¼ã‚¿</button>
                <button class="secondary" onclick="clearInput()">ã‚¯ãƒªã‚¢</button>
            </div>
            
            <label for="testDataInput"><strong>ç«¶é¦¬ãƒ‡ãƒ¼ã‚¿ (netkeibaå½¢å¼):</strong></label>
            <textarea id="testDataInput" placeholder="ã“ã“ã«ç«¶é¦¬ãƒ‡ãƒ¼ã‚¿ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„...&#10;&#10;ä¾‹:&#10;1&#9;1&#9;&#10;æ¶ˆ&#10;ãƒ­ãƒ¼ãƒ‰ã‚«ãƒŠãƒ­ã‚¢&#10;ãƒ™ãƒ©ã‚¸ã‚ªã‚ªãƒšãƒ©&#10;ã‚¨ã‚¢ãƒ«ãƒ¼ãƒ†ã‚£ãƒ¼ãƒ³&#10;(ãƒãƒ¼ãƒ“ãƒ³ã‚¸ãƒ£ãƒ¼)&#10;..."></textarea>
            
            <h4>æœŸå¾…çµæœè¨­å®š:</h4>
            <div id="expectedResults">
                <div class="horse-row">
                    <input type="text" placeholder="é¦¬å" data-field="name" data-horse="0">
                    <input type="text" placeholder="çˆ¶ç³»" data-field="sire" data-horse="0">
                    <input type="text" placeholder="æ¯ç³»" data-field="dam" data-horse="0">
                    <input type="text" placeholder="æ¯çˆ¶" data-field="damSire" data-horse="0">
                    <button onclick="addHorseRow()">+</button>
                </div>
            </div>
            
            <div style="margin-top: 15px;">
                <button onclick="runTest()" style="font-size: 16px; padding: 12px 24px;">ğŸ§ª ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ</button>
                <button class="secondary" onclick="resetExpected()">æœŸå¾…çµæœãƒªã‚»ãƒƒãƒˆ</button>
            </div>
        </div>
        
        <div id="testResults"></div>
        
        <div class="test-section">
            <h3>ğŸ“š ä½¿ã„æ–¹</h3>
            <ul>
                <li><strong>ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿</strong>: ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨äº‹å‰å®šç¾©ã•ã‚ŒãŸãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ãŒèª­ã¿è¾¼ã¾ã‚Œã¾ã™</li>
                <li><strong>æ‰‹å‹•å…¥åŠ›</strong>: ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ã«ç›´æ¥netkeibaå½¢å¼ã®ãƒ‡ãƒ¼ã‚¿ã‚’å…¥åŠ›ã§ãã¾ã™</li>
                <li><strong>æœŸå¾…çµæœ</strong>: å„é¦¬ã®æœŸå¾…ã•ã‚Œã‚‹æŠ½å‡ºçµæœã‚’è¨­å®šã§ãã¾ã™ï¼ˆè‡ªå‹•ã§æ¯”è¼ƒã•ã‚Œã¾ã™ï¼‰</li>
                <li><strong>å‹•çš„è¿½åŠ </strong>: +ãƒœã‚¿ãƒ³ã§é¦¬ã®æœŸå¾…çµæœè¡Œã‚’è¿½åŠ ã§ãã¾ã™</li>
            </ul>
        </div>
    </div>
    
    <script src="pedigreeExtractor.js"></script>
    <script>
        let horseCount = 1;
        
        // ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿1: åŸºæœ¬çš„ãªãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿
        function loadSample1() {
            const sampleData = `1\t1\t
æ¶ˆ
ãƒ­ãƒ¼ãƒ‰ã‚«ãƒŠãƒ­ã‚¢
ãƒ™ãƒ©ã‚¸ã‚ªã‚ªãƒšãƒ©
ã‚¨ã‚¢ãƒ«ãƒ¼ãƒ†ã‚£ãƒ¼ãƒ³
(ãƒãƒ¼ãƒ“ãƒ³ã‚¸ãƒ£ãƒ¼)
æ —æ±ãƒ»ä¸Šæ‘  
å…ˆä¸­9é€±
510kg(+2)
4.0 (1äººæ°—)
ç‰¡5é¹¿

æ¨ªå±±å’Œ
58.0\t
1\t2\t
æ¶ˆ
ãƒ‰ã‚¥ãƒ©ãƒ¡ãƒ³ãƒ†
ãƒ‰ã‚¥ãƒ¬ãƒƒãƒ„ã‚¡
ãƒ¢ã‚¢ã‚¶ãƒ³ã‚»ã‚¤ã‚¯ãƒªãƒƒãƒ‰
(More Than Ready)
ç¾æµ¦ãƒ»å°¾é–¢  
å…ˆä¸­9é€±
468kg(å‰è¨ˆä¸)
6.7 (4äººæ°—)
ç‰¡5é’é¹¿

æ¨ªå±±æ­¦
58.0\t`;
            
            document.getElementById('testDataInput').value = sampleData;
            
            // æœŸå¾…çµæœã‚‚è¨­å®š
            resetExpected();
            setExpectedResult(0, 'ãƒ™ãƒ©ã‚¸ã‚ªã‚ªãƒšãƒ©', 'ãƒ­ãƒ¼ãƒ‰ã‚«ãƒŠãƒ­ã‚¢', 'ã‚¨ã‚¢ãƒ«ãƒ¼ãƒ†ã‚£ãƒ¼ãƒ³', 'ãƒãƒ¼ãƒ“ãƒ³ã‚¸ãƒ£ãƒ¼');
            addHorseRow();
            setExpectedResult(1, 'ãƒ‰ã‚¥ãƒ¬ãƒƒãƒ„ã‚¡', 'ãƒ‰ã‚¥ãƒ©ãƒ¡ãƒ³ãƒ†', 'ãƒ¢ã‚¢ã‚¶ãƒ³ã‚»ã‚¤ã‚¯ãƒªãƒƒãƒ‰', 'More Than Ready');
        }
        
        // ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿2: ã‚ˆã‚Šè¤‡é›‘ãªãƒ‡ãƒ¼ã‚¿
        function loadSample2() {
            const sampleData = `1\t1\t
â—
ã‚­ã‚¿ã‚µãƒ³ãƒ–ãƒ©ãƒƒã‚¯
ã‚µãƒˆãƒãƒ€ã‚¤ãƒ¤ãƒ¢ãƒ³ãƒ‰
ãƒ¬ãƒ‡ã‚£ã‚¢ãƒ³ãƒã‚µãƒ€ãƒ¼
(ã‚¢ãƒ³ãƒãƒ¼ã‚·ãƒ£ãƒ€ã‚¤)
æ —æ±ãƒ»éŸ³ç„¡  
ä¸­2é€±
520kg(+4)
3.2 (1äººæ°—)
ç‰¡4é¹¿

M.ãƒ‡ãƒ ãƒ¼ãƒ­
57.0\t
2\t2\t
â—‹
ãƒ‡ã‚£ãƒ¼ãƒ—ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆ
ã‚¸ã‚§ãƒ³ãƒ†ã‚£ãƒ«ãƒ‰ãƒ³ãƒŠ
ã‚·ãƒ³ãƒãƒ©ã‚¤ãƒˆ
(Storm Cat)
ç¾æµ¦ãƒ»å›½æ  
ä¸­3é€±
468kg(-2)
5.1 (2äººæ°—)
ç‰4é’é¹¿

C.ãƒ«ãƒ¡ãƒ¼ãƒ«
55.0\t`;
            
            document.getElementById('testDataInput').value = sampleData;
            
            // æœŸå¾…çµæœè¨­å®š
            resetExpected();
            setExpectedResult(0, 'ã‚µãƒˆãƒãƒ€ã‚¤ãƒ¤ãƒ¢ãƒ³ãƒ‰', 'ã‚­ã‚¿ã‚µãƒ³ãƒ–ãƒ©ãƒƒã‚¯', 'ãƒ¬ãƒ‡ã‚£ã‚¢ãƒ³ãƒã‚µãƒ€ãƒ¼', 'ã‚¢ãƒ³ãƒãƒ¼ã‚·ãƒ£ãƒ€ã‚¤');
            addHorseRow();
            setExpectedResult(1, 'ã‚¸ã‚§ãƒ³ãƒ†ã‚£ãƒ«ãƒ‰ãƒ³ãƒŠ', 'ãƒ‡ã‚£ãƒ¼ãƒ—ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆ', 'ã‚·ãƒ³ãƒãƒ©ã‚¤ãƒˆ', 'Storm Cat');
        }
        
        // ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿3: å•é¡Œã®ã‚ã‚‹ãƒ‡ãƒ¼ã‚¿ï¼ˆãƒ†ã‚¹ãƒˆç”¨ï¼‰
        function loadSample3() {
            const sampleData = `1\t1\t
æ¶ˆ
ãƒ­ãƒ¼ãƒ‰ã‚«ãƒŠãƒ­ã‚¢
ãƒ­ãƒ¼ãƒ‰ã‚«ãƒŠãƒ­ã‚¢
ã‚¨ã‚¢ãƒ«ãƒ¼ãƒ†ã‚£ãƒ¼ãƒ³
(ãƒãƒ¼ãƒ“ãƒ³ã‚¸ãƒ£ãƒ¼)
æ —æ±ãƒ»ä¸Šæ‘  
1\t2\t
â–³
ãƒ‰ã‚¥ãƒ©ãƒ¡ãƒ³ãƒ†
ãƒ†ã‚¹ãƒˆãƒ›ãƒ¼ã‚¹
(More Than Ready)
ç¾æµ¦ãƒ»å°¾é–¢`;
            
            document.getElementById('testDataInput').value = sampleData;
            
            // æœŸå¾…çµæœè¨­å®š
            resetExpected();
            setExpectedResult(0, 'ãƒ­ãƒ¼ãƒ‰ã‚«ãƒŠãƒ­ã‚¢', 'ãƒ­ãƒ¼ãƒ‰ã‚«ãƒŠãƒ­ã‚¢', 'ã‚¨ã‚¢ãƒ«ãƒ¼ãƒ†ã‚£ãƒ¼ãƒ³', 'ãƒãƒ¼ãƒ“ãƒ³ã‚¸ãƒ£ãƒ¼');
            addHorseRow();
            setExpectedResult(1, 'ãƒ†ã‚¹ãƒˆãƒ›ãƒ¼ã‚¹', 'ãƒ‰ã‚¥ãƒ©ãƒ¡ãƒ³ãƒ†', '', 'More Than Ready');
        }
        
        function clearInput() {
            document.getElementById('testDataInput').value = '';
            resetExpected();
        }
        
        function addHorseRow() {
            const container = document.getElementById('expectedResults');
            const newRow = document.createElement('div');
            newRow.className = 'horse-row';
            newRow.innerHTML = `
                <input type="text" placeholder="é¦¬å" data-field="name" data-horse="${horseCount}">
                <input type="text" placeholder="çˆ¶ç³»" data-field="sire" data-horse="${horseCount}">
                <input type="text" placeholder="æ¯ç³»" data-field="dam" data-horse="${horseCount}">
                <input type="text" placeholder="æ¯çˆ¶" data-field="damSire" data-horse="${horseCount}">
                <button onclick="removeHorseRow(this)">-</button>
            `;
            container.appendChild(newRow);
            horseCount++;
        }
        
        function removeHorseRow(button) {
            const container = document.getElementById('expectedResults');
            if (container.children.length > 1) {
                button.parentElement.remove();
            }
        }
        
        function resetExpected() {
            const container = document.getElementById('expectedResults');
            container.innerHTML = `
                <div class="horse-row">
                    <input type="text" placeholder="é¦¬å" data-field="name" data-horse="0">
                    <input type="text" placeholder="çˆ¶ç³»" data-field="sire" data-horse="0">
                    <input type="text" placeholder="æ¯ç³»" data-field="dam" data-horse="0">
                    <input type="text" placeholder="æ¯çˆ¶" data-field="damSire" data-horse="0">
                    <button onclick="addHorseRow()">+</button>
                </div>
            `;
            horseCount = 1;
        }
        
        function setExpectedResult(horseIndex, name, sire, dam, damSire) {
            const inputs = document.querySelectorAll(`input[data-horse="${horseIndex}"]`);
            inputs.forEach(input => {
                const field = input.getAttribute('data-field');
                switch(field) {
                    case 'name': input.value = name; break;
                    case 'sire': input.value = sire; break;
                    case 'dam': input.value = dam; break;
                    case 'damSire': input.value = damSire; break;
                }
            });
        }
        
        function getExpectedResults() {
            const expected = [];
            const rows = document.querySelectorAll('.horse-row');
            
            rows.forEach((row, index) => {
                const inputs = row.querySelectorAll('input');
                if (inputs.length === 4) {
                    const horse = {
                        name: inputs[0].value.trim(),
                        sire: inputs[1].value.trim(),
                        dam: inputs[2].value.trim(),
                        damSire: inputs[3].value.trim()
                    };
                    
                    // ç©ºã§ãªã„è¡Œã®ã¿è¿½åŠ 
                    if (horse.name || horse.sire || horse.dam || horse.damSire) {
                        expected.push(horse);
                    }
                }
            });
            
            return expected;
        }
        
        function runTest() {
            const testData = document.getElementById('testDataInput').value;
            const expected = getExpectedResults();
            
            if (!testData.trim()) {
                alert('ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }
            
            console.log('=== ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ†ã‚¹ãƒˆé–‹å§‹ ===');
            console.log('å…¥åŠ›ãƒ‡ãƒ¼ã‚¿:', testData);
            console.log('æœŸå¾…çµæœ:', expected);
            
            try {
                // è¡€çµ±æŠ½å‡ºå®Ÿè¡Œ
                const results = PedigreeExtractor.parseAllHorses(testData);
                
                console.log('æŠ½å‡ºçµæœ:', results);
                
                // çµæœè©•ä¾¡
                let successCount = 0;
                let totalTests = 0;
                let testResults = [];
                
                // æœŸå¾…çµæœãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹å ´åˆã®æ¯”è¼ƒ
                if (expected.length > 0) {
                    expected.forEach((exp, index) => {
                        const actual = results[index];
                        const horseResult = {
                            index: index + 1,
                            expected: exp,
                            actual: actual || {},
                            tests: []
                        };
                        
                        // å„é …ç›®ã‚’ãƒ†ã‚¹ãƒˆ
                        ['name', 'sire', 'dam', 'damSire'].forEach(field => {
                            // æœŸå¾…å€¤ãŒç©ºã®å ´åˆã¯ãƒ†ã‚¹ãƒˆã‚’ã‚¹ã‚­ãƒƒãƒ—
                            if (exp[field]) {
                                totalTests++;
                                const success = actual && actual[field] === exp[field];
                                if (success) successCount++;
                                
                                horseResult.tests.push({
                                    field,
                                    expected: exp[field],
                                    actual: actual ? actual[field] : 'æœªæŠ½å‡º',
                                    success
                                });
                            }
                        });
                        
                        testResults.push(horseResult);
                    });
                } else {
                    // æœŸå¾…çµæœãªã—ã®å ´åˆã¯æŠ½å‡ºçµæœã®ã¿è¡¨ç¤º
                    results.forEach((actual, index) => {
                        testResults.push({
                            index: index + 1,
                            expected: null,
                            actual: actual,
                            tests: []
                        });
                    });
                }
                
                // çµæœã‚’è¡¨ç¤º
                displayResults(testResults, successCount, totalTests, results);
                
            } catch (error) {
                console.error('ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã‚¨ãƒ©ãƒ¼:', error);
                document.getElementById('testResults').innerHTML = `
                    <div class="test-section error">
                        <h2>âŒ ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿ</h2>
                        <p>ãƒ†ã‚¹ãƒˆå®Ÿè¡Œä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ:</p>
                        <div class="log">${error.message}\n\n${error.stack}</div>
                    </div>
                `;
            }
        }
        
        function displayResults(testResults, successCount, totalTests, rawResults) {
            const hasExpected = totalTests > 0;
            const successRate = hasExpected ? Math.round((successCount / totalTests) * 100) : 0;
            const overallSuccess = hasExpected ? (successCount === totalTests) : true;
            
            let html = `
                <div class="test-section ${overallSuccess ? 'success' : 'error'}">
                    <h2>ğŸ“Š ãƒ†ã‚¹ãƒˆçµæœ</h2>
                    <div class="stats">
                        <div class="stat-item">
                            <div class="stat-number">${rawResults.length}</div>
                            <div>æŠ½å‡ºé¦¬æ•°</div>
                        </div>
                        ${hasExpected ? `
                            <div class="stat-item">
                                <div class="stat-number">${successCount}/${totalTests}</div>
                                <div>æˆåŠŸãƒ†ã‚¹ãƒˆ</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-number">${successRate}%</div>
                                <div>æˆåŠŸç‡</div>
                            </div>
                        ` : ''}
                        <div class="stat-item">
                            <div class="stat-number">${overallSuccess ? 'âœ…' : 'âŒ'}</div>
                            <div>ç·åˆåˆ¤å®š</div>
                        </div>
                    </div>
                </div>
            `;
            
            // å„é¦¬ã®è©³ç´°çµæœ
            testResults.forEach(horseResult => {
                const horseSuccess = horseResult.tests.length === 0 || horseResult.tests.every(test => test.success);
                html += `
                    <div class="test-section ${horseSuccess ? 'success' : 'error'}">
                        <h3>ğŸ é¦¬ ${horseResult.index}${horseResult.expected ? ` - ${horseResult.expected.name || 'æœªè¨­å®š'}` : ''}</h3>
                        
                        <table>
                            <tr><th>é …ç›®</th><th>æŠ½å‡ºå€¤</th>${horseResult.expected ? '<th>æœŸå¾…å€¤</th><th>çµæœ</th>' : ''}</tr>
                            <tr>
                                <td>é¦¬å</td>
                                <td>${horseResult.actual.name || 'æœªæŠ½å‡º'}</td>
                                ${horseResult.expected ? `
                                    <td>${horseResult.expected.name || '-'}</td>
                                    <td>${getTestResult('name', horseResult)}</td>
                                ` : ''}
                            </tr>
                            <tr>
                                <td>çˆ¶ç³»</td>
                                <td>${horseResult.actual.sire || 'æœªæŠ½å‡º'}</td>
                                ${horseResult.expected ? `
                                    <td>${horseResult.expected.sire || '-'}</td>
                                    <td>${getTestResult('sire', horseResult)}</td>
                                ` : ''}
                            </tr>
                            <tr>
                                <td>æ¯ç³»</td>
                                <td>${horseResult.actual.dam || 'æœªæŠ½å‡º'}</td>
                                ${horseResult.expected ? `
                                    <td>${horseResult.expected.dam || '-'}</td>
                                    <td>${getTestResult('dam', horseResult)}</td>
                                ` : ''}
                            </tr>
                            <tr>
                                <td>æ¯çˆ¶</td>
                                <td>${horseResult.actual.damSire || 'æœªæŠ½å‡º'}</td>
                                ${horseResult.expected ? `
                                    <td>${horseResult.expected.damSire || '-'}</td>
                                    <td>${getTestResult('damSire', horseResult)}</td>
                                ` : ''}
                            </tr>
                        </table>
                        
                        ${horseResult.actual.processLog ? `
                            <h4>ğŸ” å‡¦ç†ãƒ­ã‚°</h4>
                            <div class="log">${horseResult.actual.processLog.join('\n')}</div>
                        ` : ''}
                    </div>
                `;
            });
            
            // ç”Ÿãƒ‡ãƒ¼ã‚¿
            html += `
                <div class="test-section">
                    <h3>ğŸ”§ ç”Ÿãƒ‡ãƒ¼ã‚¿å‡ºåŠ›</h3>
                    <div class="log">${JSON.stringify(rawResults, null, 2)}</div>
                </div>
            `;
            
            document.getElementById('testResults').innerHTML = html;
        }
        
        function getTestResult(field, horseResult) {
            if (!horseResult.expected || !horseResult.expected[field]) {
                return '-';
            }
            
            const test = horseResult.tests.find(t => t.field === field);
            return test ? (test.success ? 'âœ…' : 'âŒ') : '-';
        }
        
        // åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', function() {
            loadSample1(); // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã‚µãƒ³ãƒ—ãƒ«1ã‚’èª­ã¿è¾¼ã¿
        });
    </script>
</body>
</html>